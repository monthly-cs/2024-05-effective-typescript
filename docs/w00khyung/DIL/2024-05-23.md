# DIL: ì´í™í‹°ë¸Œ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸

> ìŠ¤í„°ë””: ì›”ê°„ CS, https://github.com/monthly-cs/2024-05-effective-typescript  
> ì‘ì„±ì¼: 2024-05-16
> ì‘ì„±ì: w00khyung

---

## ì•„ì´í…œ 20 ë‹¤ë¥¸ íƒ€ì…ì—ëŠ” ë‹¤ë¥¸ ë³€ìˆ˜ ì‚¬ìš©í•˜ê¸°

### ë³€ìˆ˜ì˜ ê°’ì€ ë°”ë€” ìˆ˜ ìˆì§€ë§Œ ê·¸ íƒ€ì…ì€ ë³´í†µ ë°”ë€Œì§€ ì•ŠëŠ”ë‹¤

```tsx
function fetchProduct(id: string) {}
function fetchProductBySerialNumber(id: number) {}
let id = '12-34-56';
fetchProduct(id);

id = 123456;
// ~~ '123456' is not assignable to type 'string'.
fetchProductBySerialNumber(id);
// ~~ Argument of type 'string' is not assignable to
//    parameter of type 'number'
```

```tsx
function fetchProduct(id: string) {}
function fetchProductBySerialNumber(id: number) {}

// âœ… stringê³¼ numberë¥¼ ëª¨ë‘ í¬í•¨í•  ìˆ˜ ìˆë„ë¡ íƒ€ì…ì„ í™•ì¥í•´ì•¼ ëœë‹¤.
let id: string | number = '12-34-56';
fetchProduct(id);

id = 123456; // OK
fetchProductBySerialNumber(id); // OK

// ğŸ¤” idë¥¼ ì‚¬ìš©í•  ëŒ€ë§ˆë‹¤ ê°’ì´ ì–´ë–¤ íƒ€ì…ì¸ì§€ í™•ì¸í•´ì•¼ í•œë‹¤.
```

```tsx
function fetchProduct(id: string) {}
function fetchProductBySerialNumber(id: number) {}

// âœ… ì°¨ë¼ë¦¬ ë³„ë„ì˜ ë³€ìˆ˜ë¥¼ ë„ì…í•˜ëŠ” ê²ƒì´ ë‚«ë‹¤.
const id = '12-34-56';
fetchProduct(id);

const serial = 123456; // OK
fetchProductBySerialNumber(serial); // OK
```

### ìš”ì•½

- ë³€ìˆ˜ì˜ ê°’ì€ ë°”ë€” ìˆ˜ ìˆì§€ë§Œ íƒ€ì…ì€ ì¼ë°˜ì ìœ¼ë¡œ ë°”ë€Œì§€ ì•ŠìŠµë‹ˆë‹¤.
- í˜¼ë€ì„ ë§‰ê¸° ìœ„í•´ íƒ€ì…ì´ ë‹¤ë¥¸ ê°’ì„ ë‹¤ë£° ë•Œì—ëŠ” ë³€ìˆ˜ë¥¼ ì¬ì‚¬ìš©í•˜ì§€ ì•Šë„ë¡ í•©ë‹ˆë‹¤.

## ì•„ì´í…œ 21 íƒ€ì… ë„“íˆê¸°

### ë„“íˆê¸°(widening)

- ìƒìˆ˜ë¥¼ ì‚¬ìš©í•´ì„œ ë³€ìˆ˜ë¥¼ ì´ˆê¸°í™”í•  ë•Œ íƒ€ì…ì„ ëª…ì‹œí•˜ì§€ ì•Šìœ¼ë©´ íƒ€ì… ì²´ì»¤ëŠ” íƒ€ì…ì„ ê²°ì •í•´ì•¼ í•œë‹¤.
  - ì§€ì •ëœ ë‹¨ì¼ ê°’ì„ ê°€ì§€ê³  í• ë‹¹ ê°€ëŠ¥í•œ ê°’ë“¤ì˜ ì§‘í•©ì„ ìœ ì¶”í•´ì•¼ í•œë‹¤ëŠ” ëœ»ì´ë‹¤.
  - íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ì—ì„œëŠ” ì´ëŸ¬í•œ ê³¼ì •ì„ â€˜ë„“íˆê¸°(widening)â€™ë¼ê³  ë¶€ë¥¸ë‹¤.

```tsx
interface Vector3 {
  x: number;
  y: number;
  z: number;
}

// 3D ë²¡í„°ì— ëŒ€í•œ íƒ€ì…ê³¼ ê·¸ ìš”ì†Œë“¤ì˜ ê°’ì„ ì–»ëŠ” í•¨ìˆ˜
function getComponent(vector: Vector3, axis: 'x' | 'y' | 'z') {
  return vector[axis];
}

// xì˜ íƒ€ì…ì€ í• ë‹¹ ì‹œì ì— ë„“íˆê¸°ê°€ ë™ì‘í•´ì„œ stringìœ¼ë¡œ ì¶”ë¡ ë˜ì—ˆë‹¤.
// string íƒ€ì…ì€ "x" | "y" | "z" íƒ€ì…ì— í• ë‹¹ì´ ë¶ˆê°€ëŠ¥í•˜ë¯€ë¡œ ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤.
let x = 'x';
let vec = { x: 10, y: 20, z: 30 };
getComponent(vec, x);
// ~ Argument of type 'string' is not assignable to
//   parameter of type '"x" | "y" | "z"'
```

```tsx
// íƒ€ì… ë„“íˆê¸°ê°€ ì§„í–‰ ë  ë•Œ, ì£¼ì–´ì§„ ê°’ìœ¼ë¡œ ì¶”ë¡  ê°€ëŠ¥í•œ íƒ€ì…ì´ ì—¬ëŸ¬ ê°œì´ê¸° ë•Œë¬¸ì— ê³¼ì •ì´ ìƒë‹¹íˆ ëª¨í˜¸í•˜ë‹¤.
const mixed = ['x', 1];

// ğŸ¤” mixedì˜ íƒ€ì…ì´ ë  ìˆ˜ ìˆëŠ” í›„ë³´ë“¤ì´ë‹¤.
// ('x' | 1)[]
// ['x', 1]
// [string, number]
// readonly [string, number]
// (string|number)[]
// readonly (string|number)[]
// [any, any]
// any[]

// ì •ë³´ê°€ ì¶©ë¶„í•˜ì§€ ì•Šë‹¤ë©´ mixedê°€ ì–´ë–¤ íƒ€ì…ìœ¼ë¡œ ì¶”ë¡ ë˜ì–´ì•¼ í•˜ëŠ”ì§€ ì•Œ ìˆ˜ ì—†ë‹¤.
// ê·¸ëŸ¬ë¯€ë¡œ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ëŠ” ì‘ì„±ìì˜ ì˜ë„ë¥¼ ì¶”ì¸¡í•˜ê³ , ì‹¤ì œë¡œëŠ” (string|number)[]ìœ¼ë¡œ ì¶”ë¡ ëœë‹¤.
```

```tsx
// íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ì—ì„œëŠ” ë‹¤ìŒ ì˜ˆì œì™€ ê°™ì€ ì½”ë“œë¥¼ ì˜ˆìƒí•˜ê¸° ë•Œë¬¸ì— xì˜ íƒ€ì…ì„ stringìœ¼ë¡œ ì¶”ë¡ í•œë‹¤.
let x = 'x';
x = 'a';
x = 'Four score and seven years ago...';

// ğŸ¤” ì‹¤ì œë¡œëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì‚¬ìš©ë  ìˆ˜ë„ ìˆë‹¤. ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œëŠ” ìœ íš¨í•˜ë‹¤.
let x = 'x';
x = /x|y|z/;
x = ['x', 'y', 'z'];
```

### ë„“íˆê¸° ê³¼ì •ì„ ì œì–´í•˜ëŠ” ë°©ë²• 1. const

```tsx
// âœ… let ëŒ€ì‹  constë¡œ ë³€ìˆ˜ë¥¼ ì„ ì–¸í•˜ë©´ ë” ì¢ì€ íƒ€ì…ì´ ëœë‹¤.
const x = 'x'; // type is "x"
let vec = { x: 10, y: 20, z: 30 };
getComponent(vec, x); // OK
```

### ì—¬ì „íˆ ê°ì²´ì—ì„œëŠ” ë¬¸ì œê°€ ë°œìƒí•œë‹¤

```tsx
const v = {
  x: 1,
};

// ë‹¤ìŒ ì½”ë“œëŠ” ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ì •ìƒì´ë‹¤.
// ê°ì²´ì˜ ê²½ìš° íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ì˜ ë„“íˆê¸° ì•Œê³ ë¦¬ì¦˜ì€ ê° ìš”ì†Œë¥¼ letìœ¼ë¡œ í• ë‹¹ëœ ê²ƒ ì²˜ëŸ¼ ë‹¤ë£¬ë‹¤.
// vì˜ íƒ€ì…ì€ { x: number }ê°€ ëœë‹¤.
v.x = 3; // OK
v.x = '3';
// ~ Type '"3"' is not assignable to type 'number'
v.y = 4;
// ~ Property 'y' does not exist on type '{ x: number; }'
v.name = 'Pythagoras';
// ~~~~ Property 'name' does not exist on type '{ x: number; }'
```

```tsx
const v: { x: 1 | 3 | 5 } = {
  x: 1,
}; // Type is { x: 1 | 3 | 5; }
```

- íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ëŠ” ëª…í™•ì„±ê³¼ ìœ ì—°ì„± ì‚¬ì´ì˜ ê· í˜•ì„ ìœ ì§€í•˜ë ¤ê³  í•œë‹¤.
- ì˜¤ë¥˜ë¥¼ ì¡ê¸° ìœ„í•´ì„œëŠ” ì¶©ë¶„íˆ êµ¬ì²´ì ìœ¼ë¡œ íƒ€ì…ì„ ì¶”ë¡ í•´ì•¼ í•˜ì§€ë§Œ, ì˜ëª»ëœ ì¶”ë¡ (false positive)ì„ í•  ì •ë„ë¡œ êµ¬ì²´ì ìœ¼ë¡œ ìˆ˜í–‰í•˜ì§€ëŠ” ì•ŠëŠ”ë‹¤.

### íƒ€ì… ì¶”ë¡ ì˜ ê°•ë„ ì œì–´í•˜ê¸°

```tsx
// 1. ëª…ì‹œì  íƒ€ì… êµ¬ë¬¸ ì œê³µí•˜ê¸°
const v: { x: 1 | 3 | 5 } = {
  x: 1,
}; // Type is { x: 1 | 3 | 5; }

// 2. íƒ€ì… ì²´ì»¤ì— ì¶”ê°€ì ì¸ ë¬¸ë§¥ ì œê³µí•˜ê¸°

// 3. const ë‹¨ì–¸ë¬¸ ì‚¬ìš©í•˜ê¸°
// as constë¥¼ ì‘ì„±í•˜ë©´, íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ëŠ” ìµœëŒ€í•œ ì¢ì€ íƒ€ì…ìœ¼ë¡œ ì¶”ë¡ í•œë‹¤.
const v1 = {
  x: 1,
  y: 2,
}; // Type is { x: number; y: number; }

const v2 = {
  x: 1 as const,
  y: 2,
}; // Type is { x: 1; y: number; }

const v3 = {
  x: 1,
  y: 2,
} as const; // Type is { readonly x: 1; readonly y: 2; }

// ë°°ì—´ì„ íŠœí”Œ íƒ€ì…ìœ¼ë¡œ ì¶”ë¡ í•  ë•Œì—ë„ as constë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
const a1 = [1, 2, 3]; // Type is number[]
const a2 = [1, 2, 3] as const; // Type is readonly [1, 2, 3]
```

### ìš”ì•½

- íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ê°€ ë„“íˆê¸°ë¥¼ í†µí•´ ìƒìˆ˜ì˜ íƒ€ì…ì„ ì¶”ë¡ í•˜ëŠ” ë²•ì„ ì´í•´í•´ì•¼ í•œë‹¤.
- ë™ì‘ì— ì˜í–¥ì„ ì¤„ ìˆ˜ ìˆëŠ” ë°©ë²•ì¸ const, íƒ€ì… êµ¬ë¬¸, ë¬¸ë§¥, as constì— ìµìˆ™í•´ì ¸ì•¼ í•œë‹¤.

## ì•„ì´í…œ 22 íƒ€ì… ì¢íˆê¸°

### íƒ€ì… ì¢íˆê¸°

- íƒ€ì… ì¢íˆê¸°ëŠ” íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ê°€ ë„“ì€ íƒ€ì…ìœ¼ë¡œë¶€í„° ì¢ì€ íƒ€ì…ìœ¼ë¡œ ì§„í–‰í•˜ëŠ” ê³¼ì •ì„ ë§í•œë‹¤.

```tsx
// âœ… null ì²´í¬ë¥¼ ì§„í–‰í•˜ë©´, ì‘ì—…ì´ ì‰¬ì›Œì§„ë‹¤.
const el = document.getElementById('foo'); // Type is HTMLElement | null
if (el) {
  el; // Type is HTMLElement
  el.innerHTML = 'Party Time'.blink();
} else {
  el; // Type is null
  alert('No element #foo');
}
```

```tsx
const el = document.getElementById('foo'); // Type is HTMLElement | null

// âœ… ë¶„ê¸°ë¬¸ì—ì„œ ì˜ˆì™¸ë¥¼ ë˜ì§€ê±°ë‚˜ í•¨ìˆ˜ë¥¼ ë°˜í™˜í•˜ì—¬ íƒ€ì…ì„ ì¢í ìˆ˜ë„ ìˆë‹¤.
if (!el) throw new Error('Unable to find #foo');
el; // Now type is HTMLElement
el.innerHTML = 'Party Time'.blink();
```

### instanceof

```tsx
function contains(text: string, search: string | RegExp) {
  if (search instanceof RegExp) {
    search; // Type is RegExp
    return !!search.exec(text);
  }
  search; // Type is string
  return text.includes(search);
}
```

### ì†ì„± ì²´í¬

```tsx
interface A {
  a: number;
}

interface B {
  b: number;
}

function pickAB(ab: A | B) {
  if ('a' in ab) {
    ab; // Type is A
  } else {
    ab; // Type is B
  }
  ab; // Type is A | B
}
```

### Array.isArray

```tsx
function contains(text: string, terms: string | string[]) {
  const termList = Array.isArray(terms) ? terms : [terms];
  termList; // Type is string[]
  // ...
}
```

### ì˜ëª»ëœ ì˜ˆì‹œ

```tsx
const el = document.getElementById('foo'); // type is HTMLElement | null

// ğŸ¤” ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œ typeof nullì´ "object"ì´ê¸° ë•Œë¬¸ì—, nullì´ ì œì™¸ë˜ì§€ ì•Šì•˜ë‹¤.
if (typeof el === 'object') {
  el; // Type is HTMLElement | null
}
```

```tsx
function foo(x?: number | string | null) {
  // ğŸ¤” ë¹ˆ ë¬¸ìì—´ ''ê³¼ 0 ëª¨ë‘ falseê°€ ë˜ê¸° ë•Œë¬¸ì—, íƒ€ì…ì´ ì „í˜€ ì¢í˜€ì§€ì§€ ì•Šì•˜ë‹¤.
  if (!x) {
    x; // Type is string | number | null | undefined
  }
}
```

### ëª…ì‹œì  â€˜íƒœê·¸â€™ ë¶™ì´ê¸°

```tsx
interface UploadEvent {
  type: 'upload';
  filename: string;
  contents: string;
}

interface DownloadEvent {
  type: 'download';
  filename: string;
}

type AppEvent = UploadEvent | DownloadEvent;

function handleEvent(e: AppEvent) {
  switch (e.type) {
    case 'download':
      e; // Type is DownloadEvent
      break;
    case 'upload':
      e; // Type is UploadEvent
      break;
  }
}
```

- ì´ íŒ¨í„´ì€ â€˜íƒœê·¸ëœ ìœ ë‹ˆì˜¨(tagged union)â€™ ë˜ëŠ” â€˜êµ¬ë³„ëœ ìœ ë‹ˆì˜¨(discriminated union)â€™ì´ë¼ê³  ë¶ˆë¦°ë‹¤.

### ì»¤ìŠ¤í…€ í•¨ìˆ˜

```tsx
function isInputElement(el: HTMLElement): el is HTMLInputElement {
  return 'value' in el;
}

function getElementContent(el: HTMLElement) {
  if (isInputElement(el)) {
    el; // Type is HTMLInputElement
    return el.value;
  }
  el; // Type is HTMLElement
  return el.textContent;
}
```

- ì´ëŸ¬í•œ ê¸°ë²•ì„ â€˜ì‚¬ìš©ì ì •ì˜ íƒ€ì… ê°€ë“œâ€™ë¼ê³  í•œë‹¤.
- ì–´ë–¤ í•¨ìˆ˜ë“¤ì€ íƒ€ì… ê°€ë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ë°°ì—´ê³¼ ê°ì²´ì˜ íƒ€ì… ì¢íˆê¸°ë¥¼ í•  ìˆ˜ ìˆë‹¤.

```tsx
const jackson5 = ['Jackie', 'Tito', 'Jermaine', 'Marlon', 'Michael'];

// ğŸ¤” undefinedê°€ ê±¸ëŸ¬ì§€ì§€ ì•ŠëŠ”ë‹¤.
const members = ['Janet', 'Michael'].map((who) => jackson5.find((n) => n === who));
// Type is (string | undefined)[]
```

```tsx
// ğŸ¤” filterë¥¼ ì¶”ê°€í•´ë„ ë§ˆì°¬ê°€ì§€ë‹¤.
const members = ['Janet', 'Michael'].map((who) => jackson5.find((n) => n === who)).filter((who) => who !== undefined);
// Type is (string | undefined)[]
```

```tsx
const jackson5 = ['Jackie', 'Tito', 'Jermaine', 'Marlon', 'Michael'];

// âœ… íƒ€ì… ê°€ë“œë¥¼ ì‚¬ìš©í•˜ë©´ íƒ€ì…ì„ ì¢í ìˆ˜ ìˆë‹¤.
function isDefined<T>(x: T | undefined): x is T {
  return x !== undefined;
}
const members = ['Janet', 'Michael'].map((who) => jackson5.find((n) => n === who)).filter(isDefined); // Type is string[]
```

### ìš”ì•½

- ë¶„ê¸°ë¬¸ ì™¸ì—ë„ ì—¬ëŸ¬ ì¢…ë¥˜ì˜ ì œì–´ íë¦„ì„ ì‚´í´ë³´ë©° íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ê°€ íƒ€ì…ì„ ì¢íˆëŠ” ê³¼ì •ì„ ì´í•´í•´ì•¼ í•œë‹¤.
- íƒœê·¸ëœ/êµ¬ë³„ëœ ìœ ë‹ˆì˜¨ê³¼ ì‚¬ìš©ì ì •ì˜ íƒ€ì… ê°€ë“œë¥¼ ì‚¬ìš©í•˜ì—¬ íƒ€ì… ì¢íˆê¸° ê³¼ì •ì„ ì›í™œí•˜ê²Œ ë§Œë“¤ ìˆ˜ ìˆë‹¤.

## ì•„ì´í…œ 23 í•œêº¼ë²ˆì— ê°ì²´ ìƒì„±í•˜ê¸°

- ê°ì²´ë¥¼ ìƒì„±í•  ë•ŒëŠ” ì†ì„±ì„ í•˜ë‚˜ì”© ì¶”ê°€í•˜ê¸°ë³´ë‹¤ëŠ” ì—¬ëŸ¬ ì†ì„±ì„ í¬í•¨í•´ì„œ í•œêº¼ë²ˆì— ìƒì„±í•´ì•¼ íƒ€ì… ì¶”ë¡ ì— ìœ ë¦¬í•˜ë‹¤.

```tsx
// {} ê°’ì„ ê¸°ì¤€ìœ¼ë¡œ ì¶”ë¡ ë˜ê¸° ë•Œë¬¸ì—, ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì†ì„±ì„ ì¶”ê°€í•  ìˆ˜ ì—†ë‹¤
const pt = {};
pt.x = 3;
// ~ Property 'x' does not exist on type '{}'
pt.y = 4;
// ~ Property 'y' does not exist on type '{}'
```

```tsx
interface Point {
  x: number;
  y: number;
}

// Point ì¸í„°í˜ì´ìŠ¤ë¥¼ ì •ì˜í•˜ë©´ ì˜¤ë¥˜ê°€ ë‹¤ìŒì²˜ëŸ¼ ë°”ë€ë‹¤.
const pt: Point = {};
// ~~ Type '{}' is missing the following properties from type 'Point': x, y
pt.x = 3;
pt.y = 4;
```

```tsx
// âœ… ê°ì²´ë¥¼ í•œë²ˆì— ì •ì˜í•˜ë©´ í•´ê²°í•  ìˆ˜ ìˆë‹¤.
const pt = {
  x: 3,
  y: 4,
}; // OK

// ê°ì²´ë¥¼ ë°˜ë“œì‹œ ì œê°ê° ë‚˜ëˆ ì„œ ë§Œë“¤ì–´ì•¼ í•œë‹¤ë©´, íƒ€ì… ë‹¨ì–¸ë¬¸(as)ì„ ì‚¬ìš©í•´ íƒ€ì… ì²´ì»¤ë¥¼ í†µê³¼í•˜ê²Œ í•  ìˆ˜ ìˆë‹¤.
const pt = {} as Point;
pt.x = 3;
pt.y = 4; // OK

// âœ… ë¬¼ë¡  ì´ ê²½ìš°ì—ë„ ì„ ì–¸í•  ë•Œ ê°ì²´ë¥¼ í•œêº¼ë²ˆì— ë§Œë“œëŠ” ê²Œ ë” ë‚«ë‹¤.
const pt: Point = {
  x: 3,
  y: 4,
};
```

```tsx
const pt = { x: 3, y: 4 };
const id = { name: 'Pythagoras' };
const namedPoint = {};

// ğŸ¤” ì‘ì€ ê°ì²´ë“¤ì„ ì¡°í•©í•´ì„œ í° ê°ì²´ë¥¼ ë§Œë“¤ì–´ì•¼ í•˜ëŠ” ê²½ìš°ì—ë„ ì—¬ëŸ¬ ë‹¨ê³„ë¥¼ ê±°ì¹˜ëŠ” ê²ƒì€ ì¢‹ì§€ ì•Šë‹¤.
Object.assign(namedPoint, pt, id);
namedPoint.name;
// ~~~~ Property 'name' does not exist on type '{}'

// âœ… 'ê°ì²´ ì „ê°œ ì—°ì‚°ì' ...ë¥¼ ì‚¬ìš©í•˜ë©´ í° ê°ì²´ë¥¼ í•œêº¼ë²ˆì— ë§Œë“¤ì–´ ë‚¼ ìˆ˜ ìˆë‹¤.
const namedPoint = { ...pt, ...id };
namedPoint.name; // OK, type is string

// í•„ë“œ ë‹¨ìœ„ë¡œ ê°ì²´ë¥¼ ìƒì„±í•  ìˆ˜ë„ ìˆë‹¤.
const pt0 = {};
const pt1 = { ...pt0, x: 3 };
const pt: Point = { ...pt1, y: 4 }; // OK
```

### ì¡°ê±´ë¶€ ì†ì„±

```tsx
declare let hasMiddle: boolean;
const firstLast = { first: 'Harry', last: 'Truman' };

// íƒ€ì…ì— ì•ˆì „í•œ ë°©ì‹ìœ¼ë¡œ ì¡°ê±´ë¶€ ì†ì„±ì„ ì¶”ê°€í•˜ë ¤ë©´, ì†ì„±ì„ ì¶”ê°€í•˜ì§€ ì•ŠëŠ” null ë˜ëŠ” {}ìœ¼ë¡œ ê°ì²´ ì „ê°œë¥¼ ì‚¬ìš©í•˜ë©´ ëœë‹¤.
const president = { ...firstLast, ...(hasMiddle ? { middle: 'S' } : {}) };

// íƒ€ì…ì´ ì„ íƒì  ì†ì„±ì„ ê°€ì§„ ê²ƒìœ¼ë¡œ ì¶”ë¡ ëœë‹¤.
const president:
  | {
      middle: string;
      first: string;
      last: string;
    }
  | {
      first: string;
      last: string;
    };

president.middle;
// ~~~~~~ Property 'middle' does not exist on type
//        '{ first: string; last: string; }'
```

```tsx
declare let hasDate: boolean
const nameTitle = { name: 'Khufu', title: 'Paraoh' }
const pharaoh = {
  ...nameTitle,
  ...(hasDate ? { start: -2589, end: -2566 } : {}),
}

// íƒ€ì…ì´ ìœ ë‹ˆì˜¨ìœ¼ë¡œ ì¶”ë¡ ëœë‹¤. startì™€ endê°€ ì„ íƒì  í•„ë“œê°€ ì•„ë‹ˆë‹¤.
const pharaoh = {
	start: number
	end: number
	name: string
	title: string
} | {
	name: string
	title: string
}

pharaoh.start
// { name: string; title: string; } í˜•ì‹ì— 'start' ì†ì„±ì´ ì—†ìŠµë‹ˆë‹¤.

// ì´ ê²½ìš°ëŠ” startì™€ endê°€ í•­ìƒ í•¨ê»˜ ì •ì˜ëœë‹¤.
// ì´ ì ì„ ê³ ë ¤í•œ ìœ ë‹ˆì˜¨ì„ ì‚¬ìš©í•˜ëŠ” ê²Œ ê°€ëŠ¥í•œ ê°’ì˜ ì§‘í•©ì„ ë” ì •í™•íˆ í‘œí˜„í•  ìˆ˜ ìˆë‹¤.
// ê·¸ëŸ°ë° ìœ ë‹ˆì˜¨ë³´ë‹¤ëŠ” ì„ íƒì  í•„ë“œê°€ ë‹¤ë£¨ê¸°ì—ëŠ” ë” ì‰¬ìš¸ ìˆ˜ ìˆë‹¤.
```

```tsx
// ì„ íƒì  í•„ë“œ ë°©ì‹ìœ¼ë¡œ í‘œí˜„í•˜ë ¤ë©´ ë‹¤ìŒì²˜ëŸ¼ í—¬í¼ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ë©´ ëœë‹¤.
function addOptional<T extends object, U extends object>(a: T, b: U | null): T & Partial<U> {
  return { ...a, ...b };
}

const president = addOptional(nameTitle, hasDates ? { start: -2589, end: -2566 } : null);
president.start; // OK, type is number | undefined
```

### ìš”ì•½

- ì†ì„±ì„ ì œê°ê° ì¶”ê°€í•˜ì§€ ë§ê³  í•œêº¼ë²ˆì— ê°ì²´ë¡œ ë§Œë“¤ì–´ì•¼ í•œë‹¤. ì•ˆì „í•œ íƒ€ì…ìœ¼ë¡œ ì†ì„±ì„ ì¶”ê°€í•˜ë ¤ë©´ ê°ì²´ ì „ê°œ(`{â€¦a, â€¦b}`)ë¥¼ ì‚¬ìš©í•˜ë©´ ëœë‹¤.
- ê°ì²´ì— ì¡°ê±´ë¶€ë¡œ ì†ì„±ì„ ì¶”ê°€í•˜ëŠ” ë°©ë²•ì„ ìµíˆë„ë¡ í•˜ì.
