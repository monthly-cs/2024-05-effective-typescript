# DIL: ì´í™í‹°ë¸Œ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸

> ìŠ¤í„°ë””: ì›”ê°„ CS, https://github.com/monthly-cs/2024-05-effective-typescript  
> ì‘ì„±ì¼: 2024-05-30  
> ì‘ì„±ì: dusunax

---

## ì•„ì´í…œ 33: string íƒ€ì…ë³´ë‹¤ ë” êµ¬ì²´ì ì¸ íƒ€ì… ì‚¬ìš©í•˜ê¸° Prefer More Precise Alternatives to String Types

### ë¶ˆë¶„ëª…í•œ string íƒ€ì… ì‚¬ìš©

- ë¬¸ìì—´ì„ ë‚¨ë°œí•˜ì—¬ ìƒì„±ë˜ì—ˆë‹¤. stringly typed.

```tsx
interface Album {
  artist: string;
  title: string;
  releaseDate: string; // YYYY-MM-DD
  recordingType: string; // E.g., "live" or "studio"
  // ì˜ëª»ëœ ê°’ì„ ì…ë ¥í•´ë„, íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ê°€ ì•Œ ìˆ˜ ì—†ì–´ ì˜¤ë¥˜ë¡œ ë“œëŸ¬ë‚˜ì§€ ì•ŠìŒ
}

// ê°œì„ 
/** ë…¹ìŒì´ ì§„í–‰ëœ í™˜ê²½ */
type RecordingType = "studio" | "live";
// íƒ€ì…ì„ ëª…ì‹œì ìœ¼ë¡œ ì •ì˜
// í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ëŠ” ê³³ì—ì„œ íƒ€ì…ì˜ ì„¤ëª…ì„ ë³¼ ìˆ˜ ìˆë‹¤

interface Album {
  artist: string;
  title: string;
  releaseDate: Date;
  recordingType: RecordingType;
}
```

1. ë‹¤ë¥¸ ê³³ìœ¼ë¡œ ê°’ì´ ì „ë‹¬ë˜ì–´ë„ ì‰½ê²Œ íƒ€ì…ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.
2. íƒ€ì…ì˜ ì •ì˜í•˜ê³ , ì£¼ì„ì„ ë¶™ì¼ ìˆ˜ ìˆë‹¤
3. keyof ì—°ì‚°ìë¡œ ê°ì²´ì˜ ì†ì„± ì²´í¬ê°€ ê°€ëŠ¥í•˜ë‹¤.

### ì˜ˆì‹œ: ì œë„ˆë¦­ íƒ€ì…ì„ ì‚¬ìš©í•˜ëŠ” ì˜ˆì‹œ

```tsx
// â—ï¸ anyë¥¼ ì‚¬ìš©í•´ ì •ë°€í•˜ì§€ ëª»í•˜ë‹¤.
// ë°˜í™˜ê°’ì— anyë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì€ ë§¤ìš° ì¢‹ì§€ ì•Šë‹¤.
function pluckA(records: any[], key: string): any[] {
  return records.map((r) => r[key]);
}

// â—ï¸ ì œë„ˆë¦­ íƒ€ì…
function pluckB<T>(records: T[], key: string): any[] {
  return records.map((r) => r[key]);
  // keyëŠ” "artist" | "title" | "releaseDate" | "recordingType" ë§Œ ìœ íš¨í•˜ë‹¤.
  // ì§€ê¸ˆì€ string.
  // ê·¸ë ‡ë‹¤ë©´?ğŸ¤”
}

// Keyì˜ íƒ€ì…
type K = keyof Album;
// ê·¸ëŸ¬ë¯€ë¡œ, ìŠ¤íŠ¸ë§ì„ keyof Të¡œ ë°”ê¾¸ë©´ ëœë‹¤.
// â—ï¸ keyof T
function pluckC<T>(records: T[], key: keyof T) {
  return records.map((r) => r[key]);
}
// íƒ€ì… ì²´ì»¤ë¥¼ í†µê³¼í•˜ê³ , ë°˜í™˜ íƒ€ì…ì„ ì¶”ë¡ í•˜ê³ , ì¶”ë¡ ëœ íƒ€ì…ì„ ì•Œ ìˆ˜ ìˆë‹¤.
// function pluck<T>(records: T[], key: keyof T): T[keyof T][]
// T[keyof T]ëŠ”? ì•„ì§ ë„ˆë¬´ ë„“ë‹¤. (string | Date)[]

// â—ï¸ ë‘ ë²ˆì§¸ ì œë„ˆë¦­ ì¶”ê°€í•˜ê¸° ğŸ‘
// K extends keyof T : keyof Tì˜ ë¶€ë¶„ ì§‘í•©
// keyof Tì˜ ë²”ìœ„ì— ì†í•˜ëŠ” ê°’ì´ë‹¤. ë‹¨ì¼ ê°’
function pluckD<T, K extends keyof T>(records: T[], key: K): T[K][] {
  return records.map((r) => r[key]);
}
pluckD<Album, "releaseDate">([someAlbum], "releaseDate");
// Date[]
// [Date: "2024-05-30T00:00:00.000Z"]
```

- pluckC: ì œë„ˆë¦­
  ![image](https://github.com/dusunax/blog/assets/94776135/a0d9a981-5eaa-4964-b0ce-d958b70fb058)
- pluckD: 2ê°€ì§€ ì œë„ˆë¦­
  ![image](https://github.com/dusunax/blog/assets/94776135/739bc553-74f7-4af0-a911-d36f2b1374f3)

### `keyof`ì™€ `K extends keyof T` ì‚´í´ë³´ê¸°

- íƒ€ì… ì œë„¤ë¦­ê³¼ ê´€ë ¨ëœ í‚¤ì›Œë“œì™€ êµ¬ë¬¸

#### âœ… keyof í‚¤ì›Œë“œ

- keyof TëŠ” íƒ€ì… Tì˜ ëª¨ë“  í‚¤ë¥¼ ë‚˜íƒ€ë‚´ëŠ” íƒ€ì…

```tsx
{
  name: string;
  age: number;
}
// keyof TëŠ” "name" | "age"ì™€ ê°™ì€ ìœ ë‹ˆì–¸ íƒ€ì…
```

#### âœ… K extends keyof T

- Kê°€ keyof Tì˜ ì„œë¸Œíƒ€ì…ì´ì–´ì•¼ í•¨ì„ ì˜ë¯¸
- ì¦‰, KëŠ” Tì˜ í‚¤ë“¤ ì¤‘ í•˜ë‚˜, ë˜ëŠ” ê·¸ ì´ìƒì˜ ì¡°í•©ì¼ ìˆ˜ ìˆë‹¤.

```tsx
function getProperty<T, K extends keyof T>(obj: T, key: K): T[K] {
  return obj[key];
}
// KëŠ” Tì˜ í‚¤ë“¤ ì¤‘ í•˜ë‚˜ì—¬ì•¼ í•˜ë¯€ë¡œ, obj[key]ê°€ ìœ íš¨í•˜ë‹¤.
```

#### âŒ K: keyof T?

- ì œë„¤ë¦­ íƒ€ì… Kê°€ keyof T íƒ€ì…ê³¼ ì •í™•íˆ ê°™ìŒì„ ëª…ì‹œí•˜ë ¤ í•¨
  - KëŠ” ë°˜ë“œì‹œ Tì˜ í‚¤ë“¤ ì¤‘ í•˜ë‚˜ë§Œì„ ê°€ì§ˆ ìˆ˜ ìˆë‹¤.
- K: keyof TëŠ” ìœ íš¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì œë„ˆë¦­ íƒ€ì…ì„ ì œí•œí•  ë•ŒëŠ” í•­ìƒ extends í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤. K: keyof TëŠ” ë¬¸ë²•ì ìœ¼ë¡œ ì˜¤ë¥˜!

### ì œë„¤ë¦­ì„ ì ì ˆí•˜ê²Œ ì‚¬ìš©í•˜ê¸°

```tsx
function pluckD<T, K extends keyof T>(records: T[], key: K): T[K][];
```

- ë§¤ê°œë³€ìˆ˜ íƒ€ì…ì´ ì •ë°€í•´ì¡Œê¸° ë•Œë¬¸ì—, Albumì˜ í‚¤ì— ìë™ì™„ì„± ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.
- stringì€ anyì™€ ë¹„ìŠ·í•œ ë¬¸ì œë¥¼ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.
  - ì˜ëª» ì‚¬ìš©í•˜ë©´?
    - ë¬´íš¨í•œ ê°’ì„ í—ˆìš©, íƒ€ì… ê°„ì˜ ê´€ê³„ ê°ì¶¤
    - ì‹¤ì œ ë²„ê·¸ë¥¼ ì°¾ê¸° ëª»í•˜ë„ë¡ íƒ€ì… ì²´ì»¤ë¥¼ ë°©í•´í•œë‹¤.
- ì •í™•í•œ íƒ€ì…ì„ ì‚¬ìš©í•˜ë©´?
  - ì˜¤ë¥˜ë¥¼ ë°©ì§€í•˜ê³ , ì½”ë“œì˜ ê°€ë…ì„±ì„ í–¥ìƒ ì‹œí‚¨ë‹¤.

### Things to Remember

- Avoid "stringly typed" code. Prefer more appropriate types where not every string is a possibility.
  - ë¬¸ìì—´ì„ ë‚¨ë°œí•´ ì„ ì–¸í•œ ì½”ë“œë¥¼ í”¼í•˜ì.
  - stringì€ ëª¨ë“  ë¬¸ìì—´ì„ í• ë‹¹í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì—, êµ¬ì²´ì ì¸ íƒ€ì…ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤~
- Prefer a union of string literal types to string if that more accurately describes the domain of a variable. You'll get stricter type checking and improve the development experience.
  - ë¬¸ìì—´ ë¦¬í„°ëŸ´ íƒ€ì…ì˜ ìœ ë‹ˆì˜¨ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´, íƒ€ì… ì²´í¬ë¥¼ ë” ì—„ê²©íˆ í•  ìˆ˜ ìˆê³  ìƒì‚°ì„±ì„ í–¥ìƒì‹œì¼œ ì¢‹ë‹¤(ìë™ ì™„ì„±, ì˜¤íƒ€ í™•ì¸)
- Prefer keyof T to string for function parameters that are expected to be properties of an object.
  - ê°ì²´ì˜ ì†ì„±ëª…ì„ => í•¨ìˆ˜ ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ì„ ë•ŒëŠ”?
    - `string`ë³´ë‹¤ `keyof T`ë¥¼ ì‚¬ìš©í•˜ì
