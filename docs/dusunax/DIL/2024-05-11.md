# DIL: ì´í™í‹°ë¸Œ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸

> ìŠ¤í„°ë””: ì›”ê°„ CS, https://github.com/monthly-cs/2024-05-effective-typescript  
> ì‘ì„±ì¼: 2024-05-11  
> ì‘ì„±ì: dusunax

---

## PPT ì½”ë“œ ì •ë¦¬

```tsx
function registerCallback(callback: () => void) {
  if (callback) {
    callback();
  } else {
    console.log("No callback provided.");
  }
}

const button = document.getElementById("myButton");

registerCallback(() => {
  button &&
    button.addEventListener("click", (e) => {
      e.stopPropagation();
      console.log("Button clicked!");
    });
});
```

```tsx
/**
 * - ì˜¤ë¥˜ê°€ ë°œìƒí• ê¹Œìš”?
 * - ì–´ë–¤ ìœ„ì¹˜ì—ì„œ ë°œìƒí• ê¹Œìš”?
 * - ì´ìœ ëŠ” ë¬´ì—‡ì¸ê°€ìš”?
 * */
// ê²½ìš° A
function ë‘˜_ë‚˜ëˆ„ê¸°_A(input) {
  return input / 2;
}
console.log(ë‘˜_ë‚˜ëˆ„ê¸°_A("10"));

// ê²½ìš° B
function ë‘˜_ë‚˜ëˆ„ê¸°_B(input: number) {
  return input / 2;
}
console.log(ë‘˜_ë‚˜ëˆ„ê¸°_B("10"));

// ê²½ìš° C
function ë‘˜_ë‚˜ëˆ„ê¸°_C(input: number) {
  return input / 2;
}
console.log(ë‘˜_ë‚˜ëˆ„ê¸°_C("10" as any));
```

```tsx
function calculateArea(shape: Shape): number {
  if (shape.kind === "circle") {
    return Math.PI * shape.radius ** 2;
  } else if (shape.kind === "square") {
    return shape.width ** 2;
  } else {
    throw new Error("Unknown shape kind");
  }
}

function calculateArea(shape: Shape): number {
  if ("radius" in shape) {
    return Math.PI * shape.radius ** 2;
  } else if ("width" in shape) {
    return shape.width ** 2;
  } else {
    throw new Error("Unknown shape kind");
  }
}
```

```tsx
function format(input: number): string; // ìˆ«ì í˜•ì‹
function format(input: string): string; // ë¬¸ìì—´ í˜•ì‹

function format(input: any): string {
  if (typeof input === "number") {
    return `Number: ${input}`;
  } else if (typeof input === "string") {
    return `String: ${input}`;
  } else {
    throw new Error("Unsupported type");
  }
}

const formattedNumber = format(42); // "Number: 42"
const formattedString = format("Hello"); // "String: Hello"
console.log(formattedNumber, formattedString);
```

### any: ë¬¸ì œì•¼ ë¬¸ì œ

```tsx
interface UserData {
  id: string;
  name: string;
  height: string;
}

interface DataProvider {
  fetchData: (userId: string) => any;
}

class UserApi implements DataProvider {
  private data: any;

  constructor() {
    this.data = {};
  }

  setData(data: UserData) {
    this.data = data;
  }

  fetchData(userId: string) {
    // ë„¤íŠ¸ì›Œí¬ ìš”ì²­~
    // ì‹¤ì œ ì‹œë‚˜ë¦¬ì˜¤ì—ì„œëŠ” ì‚¬ìš©ì IDë¥¼ ê¸°ë°˜ìœ¼ë¡œ APIì—ì„œ ì‚¬ìš©ì ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ ê²ƒ
    return {
      id: userId,
      name: "ê¹€ìœ ì €",
      height: "180.5",
    };
  }
}

const userApi: DataProvider = new UserApi();
const fetchedUserData = userApi.fetchData("ìœ ì €ì•„ì´ë””");
console.log(`User Height: ${fetchedUserData.height.toFixed(2)}`);
// ğŸš« ëŸ°íƒ€ì„ ì˜¤ë¥˜: toFixedëŠ” í•¨ìˆ˜ê°€ ì•„ë‹˜
```

### any: ì œë„¤ë¦­

```tsx
interface UserData {
  id: string;
  name: string;
  height: string;
}

interface DataProvider<T> {
  fetchData: (userId: string) => T;
}

class UserApi implements DataProvider<UserData> {
  private data: UserData | undefined;

  constructor() {
    this.data = undefined;
  }

  setData(data: UserData) {
    this.data = data;
  }

  fetchData(userId: string) {
    // ë„¤íŠ¸ì›Œí¬ ìš”ì²­~
    // ì‹¤ì œ ì‹œë‚˜ë¦¬ì˜¤ì—ì„œëŠ” ì‚¬ìš©ì IDë¥¼ ê¸°ë°˜ìœ¼ë¡œ APIì—ì„œ ë¹„ë™ê¸°ë¡œ ì‚¬ìš©ì ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ ê²ƒ
    return {
      id: userId,
      name: "ê¹€ìœ ì €",
      height: "180.5",
    };
  }
}

const userApi = new UserApi();
const fetchedUserData = userApi.fetchData("ìœ ì €ì•„ì´ë””");
console.log(`User Height: ${fetchedUserData.height.toFixed(2)}`);
// ğŸš« ëŸ°íƒ€ì„ ì˜¤ë¥˜: toFixedëŠ” í•¨ìˆ˜ê°€ ì•„ë‹˜
```

```tsx
/ í™˜ìœ¨ ì •ë³´ë¥¼ í‘œí˜„í•˜ëŠ” ì¸í„°í˜ì´ìŠ¤
interface ExchangeRate {
  currency: string;
  rate: number;
}

// ë‹¬ëŸ¬ë¥¼ ì›í™”ë¡œ í™˜ì „í•˜ëŠ” í•¨ìˆ˜
const exchangeDollarToWon: (amount: number, exchangeRate: ExchangeRate) => number =
  (amount: number, exchangeRate: ExchangeRate): number => {
    if (typeof amount !== 'number' || typeof exchangeRate.rate !== 'number') {
      // ìˆ«ìê°€ ì•„ë‹Œ ì¸ìê°€ ì „ë‹¬ë˜ë©´ ì˜¤ë¥˜ ë°œìƒ
      throw new Error('Invalid input: arguments must be numbers');
    }
    return amount * exchangeRate.rate;
};

// ë‹¬ëŸ¬ë¥¼ ìœ ë¡œë¡œ í™˜ì „í•˜ëŠ” í•¨ìˆ˜
const exchangeDollarToEuro: any = (amount: number, exchangeRate: ExchangeRate): number => {
  return amount * exchangeRate.rate;
};

// í™˜ì „ ì •ë³´
const dollarToWonRate: ExchangeRate = { currency: 'KRW', rate: 1150 };
const dollarToEuroRate: ExchangeRate = { currency: 'EUR', rate: 0.85 };

// í™˜ì „ í•¨ìˆ˜ í˜¸ì¶œ
console.log(exchangeDollarToWon(100, dollarToWonRate)); // 115000
console.log(exchangeDollarToEuro(100, dollarToEuroRate)); // 85
console.log(exchangeDollarToEuro("100", dollarToEuroRate)); // "100" ë¬¸ìì—´ì´ ë°˜í™˜ë¨
```
