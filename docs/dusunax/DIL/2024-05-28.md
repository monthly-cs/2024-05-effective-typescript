# DIL: ì´í™í‹°ë¸Œ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸

> ìŠ¤í„°ë””: ì›”ê°„ CS, https://github.com/monthly-cs/2024-05-effective-typescript  
> ì‘ì„±ì¼: 2024-05-28  
> ì‘ì„±ì: dusunax

---

## ì•„ì´í…œ 31: íƒ€ì… ì£¼ë³€ì— null ê°’ ë°°ì¹˜í•˜ê¸°

### ì˜ˆì‹œ: null ê´€ë ¨ëœ ê´€ê³„ë¥¼ ê°€ì§„ ê²°ê³¼ê°’ ë¦¬í„´

- ë¬¸ì œ ì½”ë“œ

```tsx
// @strictNullChecks: false
function extent(nums: Iterable<number>) {
  // numë°°ì—´ì´ ë¹„ì–´ìˆì„ ìˆ˜ ìˆìŒ
  let min, max; // undefined, undefined
  for (const num of nums) {
    if (!min) {
      // falsyê°€ ì•„ë‹ˆë¼ undefinedë¥¼ ì²´í¬í•´ì•¼ í•œë‹¤
      // => 0ì¼ë•Œ ë§ì”Œì›Œì§
      min = num;
      max = num;
    } else {
      min = Math.min(min, num);
      max = Math.max(max, num);
    }
  }
  return [min, max];
}
```

- ê°œì„  ì½”ë“œ

```tsx
function extent(nums: Iterable<number>) {
  let minMax: [number, number] | null = null;
  // ì‚¬ìš©í•˜ê¸° ë” ìˆ˜ì›”í•œ ì½”ë“œ
  // íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ê°€ null ê°’ ì‚¬ì´ì˜ ê´€ê³„ë¥¼ ì´í•´í•  ìˆ˜ ìˆë„ë¡ í–ˆë‹¤ (ë‘ ê°’ì´ ë‹¤ ì¡´ì¬í•˜ê±°ë‚˜, nullì„)
  // ë‹¨ì¼ ê°ì²´ë¡œ ì„¤ê³„ë¥¼ ê°œì„ í–ˆë‹¤
  // nullì²´í¬ê°€ ì œëŒ€ë¡œ ë™ì‘í•œë‹¤
  for (const num of nums) {
    if (!minMax) { // nullì´ëƒ!
      minMax = [num, num];
    } else {
      const [oldMin, oldMax] = minMax;
      minMax = [Math.min(num, oldMin), Math.max(num, oldMax)];
    }
  }
  return minMax;
}
...
const [min, max] = extent([0, 1, 2])!; // null ë‹¨ì–¸ ìì œí•˜ì!
const span = max - min;  // ì •ìƒ
...
const range = extent([0, 1, 2]);
if (range) { // null ì²´í¬~
  const [min, max] = range;
  const span = max - min;  // ì •ìƒ
}
```

### nullê³¼ nullì´ ì•„ë‹Œ ê°’ì˜ ë¹„ë¹”ë°¥

- ë„¤íŠ¸ì›Œí¬ ìš”ì²­ì˜ ê²½ìš°?
  - í•„ìš”í•œ ë°ì´í„°ê°€ ì¤€ë¹„ëœ ë‹¤ìŒ í´ë˜ìŠ¤ë¥¼ ë§Œë“ ë‹¤(ë°ì´í„°ë¥¼ ê°€ê³µí•œë‹¤)
  - null ìƒíƒœì— ëŒ€í•œ ê²½ìš°ì˜ ìˆ˜ê°€ ë§ë‹¤ë©´?? => null ì²´í¬ ë‚œë¬´, ë²„ê·¸ ì–‘ì‚°
- nullì¸ ê²½ìš°ê°€ í•„ìš”í•œ ì†ì„±ì€ Promiseë¡œ ë°”ê¾¸ë©´ ì•ˆëœë‹¤
  - ì½”ë“œê°€ ë³µì¡í•´ì§€ê³ , ëª¨ë“  ë©”ì„œë“œê°€ ë¹„ë™ê¸°ë¡œ ë°”ë€Œì–´ì•¼ í•œë‹¤
  - ë°ì´í„°ë¥¼ ë¡œë“œí•˜ëŠ” ì½”ë“œë¥¼ ë‹¨ìˆœí•˜ê²Œ í•˜ì§€ë§Œ ë°ì´í„°ë¥¼ ì‚¬ìš©í•  ë•Œ ì½”ë“œê°€ ë³µì¡í•´ì§€ê¸°ë„ í•œë‹¤

### ì˜ˆì‹œ

#### ë™ê¸°ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ëŠ” ì½”ë“œ

```tsx
interface UserProfile {
  id: number;
  name: string;
  email: string | null; // ì´ë©”ì¼ì´ nullì¼ ìˆ˜ ìˆìŒ
}

// ğŸ“Œ ì‚¬ìš©ì í”„ë¡œí•„ì„ ë¹„ë™ê¸°ì ìœ¼ë¡œ ë°˜í™˜í•˜ëŠ” async í•¨ìˆ˜
// Promiseë¥¼ ë°˜í™˜
async function getUserProfileAsync(userId: number): Promise<UserProfile> {
  const users: UserProfile[] = [
    { id: 1, name: "Alice", email: "alice@example.com" },
    { id: 2, name: "Bob", email: "bibim@example.com" },
    { id: 3, name: "Jack", email: null },
  ];

  return users.find((user) => user.id === userId); // undefined ì¸ ê²ƒë¶€í„° ì—ëŸ¬
  // {id: -1, name: null, email: null} ê°™ì´ ì´ˆê¸°ê°’ ë§Œë“¤ë©´? ë³µì¡í•´ì§
  // `|| null`ë¡œ ì²˜ë¦¬í•˜ëŠ” ê²ƒì´ ì½”ë“œë¥¼ ë‹¨ìˆœíˆí•˜ê³ , ê°œë°œìì™€ íƒ€ì… ì²´ì»¤ê°€ ì—°ê´€ê´€ê³„ë¥¼ ì´í•´í•˜ê¸° ì‰½ë„ë¡ í•œë‹¤.
}

(async function () {
  const userB = await getUserProfileAsync(3);
  if (userB?.email) {
    console.log(`User email: ${userB.email}`);
  } else {
    console.log("User email not available");
  }
})();
```

### Things to Remember

- Avoid designs in which one value being null or not null is implicitly related to another value being null or not null.
  - í•œ ê°’ì˜ null ì—¬ë¶€ê°€ ë‹¤ë¥¸ ê°’ì˜ null ì—¬ë¶€ì— ì•”ì‹œì ìœ¼ë¡œ ê´€ë ¨ë˜ë„ë¡ ì‘ì„±í•˜ì§€ ë§ì (ì°”ë¦¬ëŠ” ì  ìˆìŒ)
- Push null values to the perimeter of your API by making larger objects either null or fully non-null. This will make code clearer both for human readers and for the type checker.
  - API ì‘ì„± ì‹œì—ëŠ”, ë°˜í™˜ íƒ€ì…ì„ í° ê°ì²´ë¡œ ë§Œë“¤ì–´ ì „ì²´ê°€ nullì´ê±°ë‚˜ nullì´ ì•„ë‹ˆë„ë¡ ì‘ì„±í•´ ëª…ë£Œí•˜ê²Œ í•˜ì.
- Consider creating a fully non-null class and constructing it when all values are available.
  - ëª¨ë“  ê°’ì´ ì¤€ë¹„ ë˜ì—ˆì„ ë•Œ, í´ë˜ìŠ¤ ìƒì„±í•˜ë„ë¡ í•˜ì.

```
ğŸ“Œ Using fully non-null APIs and classes is preferable to using null values in them.
``
```
