# DIL: 이펙티브 타입스크립트

> 스터디: 월간 CS, https://github.com/monthly-cs/2024-05-effective-typescript  
> 작성일: 2024-06-11
> 작성자: paran22

---

## 6장 타입 선언과 @types
## 아이템 45. devDependencies에 typescript와 @types 추가하기
- dependencies: 현재 프로젝트를 실행하는 데 필수적인 라이브러리가 포함된다. 프로젝트를 npm에 공개하여 다른 사용자가 해당 프로젝트를 설치하면 dependencies에 있는 라이브러리도 함께 설치된다. 이를 전이(transitive) 의존성이라고 한다.
- devDependencies: 현재 프로젝트를 개발하고 테스트하는데 사용되지만, 런타임에는 필요 없는 라이브러리.
- peerDependencies: 런타임에 필요하긴 하지만, 의존성을 직접 관리하지 않는 라이브러리
- 타입스크립트는 개발 도구일 뿐 타입 정보는 런타임에 존재하지 않기 때문에 타입스크립트와 관련된 라이브러리는 일반적으로 devDependencies에 속한다.
- 타입스크립트는 시스템 레벨로 설치하기보다는 devDependencies를 통해 설치해 팀원들이 모두 항상 정확한 버전의 타입스크립트를 설치하도록 하는 것이 좋다.
- @types는 타입 정보만 가지고 있으므로 devDepencies에 있어야 한다.(다른 예외 상황은 아이템 46)

## 아이템 46. 타입 선언과 관련된 세 가지 버전 이해하기
- 타입스크립트를 사용할 때 라이브러리의 버전, 타입 선언(@types)의 버전, 타입스크립트의 버전을 고려해야 한다.
- 이 중 하나라도 맞지 않으면 오류가 발생할 수 있다.
- 라이브러리와 타입 정보의 버전이 별도로 관리되는 방식은 다음 네 가지 문제점이 있다.
    - 라이브러리를 업데이트했지만 타입 선언은 업데이트 하지 않는 경우 오류가 발생할 수 있다. 해결책으로는 타입 선언을 업데이트 하거나, 불가능하다면 보강을 활용하거나, 타입 선언의 업데이트를 직접 작성하고 공개하는 방법이 있다.
    - 라이브러리보다 타입 선언의 버전이 최신일 수 있다. 라이브러리 버전을 올리거나 타입 선언의 버전을 내려서 버전을 맞춰야 한다.
    - 프로젝트에서 사용하는 타입스크립트 버전보다 라이브러리에서 필요로 하는 타입스크립트 버전이 최신일 수 있다. 프로젝트의 타입스크립트 버전을 올리거나 라이브러리 타입 선언의 버전을 내리거나, declare module 선언으로 라이브러리의 타입 정보를 없앨 수 있다.
    - @types 의존성이 중복될 수 있다. @types의 버전을 서로 호환되게 할 수 있다.
- 라이브러리가 타입스크립트로 작성되고 컴파일러를 통해 타입 선언이 생성된 경우라면 버전 불일치 문제는 해결되나, 번들링 방식에서 발생할 수 있는 문제점이 있다.
    - 번들링 타입 선언에 보강 기법으로 해결할 수 없는 오류가 있는 경우, 혹은 타입스크립트 버전이 올라가면서 오류가 발생하는 경우에 문제가 발생할 수 있다. 번들된 타입에서는 @types의 버전 선택이 불가능하다.
    - 프로젝트 내의 타입 선언이 다른 라이브러리의 타입 선언에 의존한다면 문제가 될 수 있다(아이템 51 참고)
    - 프로젝트의 과거 버전에 있는 타입 선언에 문제가 있는 경우 과거 버전으로 돌아가서 패치 업데이트를 해야 한다.
    - 타입 선언의 패치 업데이트를 자주 하기 어렵다.
- 라이브러리를 공개하려는 경우 타입 선언을 자체적으로 포함하는 것과 타입 정보만 분리하여 DefinitelyTyped에 공개하는 것의 장단점을 비교해봐야 한다.
- 공식적인 권장사항은 라이브러리가 타입스크립트로 작성된 경우만 타입 선언을 라이브러리에 포함하는 것이다.
