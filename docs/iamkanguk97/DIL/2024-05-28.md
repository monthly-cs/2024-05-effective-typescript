# DIL: ì´í™í‹°ë¸Œ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸

> ìŠ¤í„°ë””: ì›”ê°„ CS, https://github.com/monthly-cs/2024-05-effective-typescript  
> ì‘ì„±ì¼: 2024-05-28<br/>
> ì‘ì„±ì: iamkanguk97

---

# 4ì¥: íƒ€ì… ì„¤ê³„

> íƒ€ì… ì‹œìŠ¤í…œì˜ í° ì¥ì  ì¤‘ í•˜ë‚˜ëŠ” ë°ì´í„° íƒ€ì…ì„ ëª…í™•íˆ ì•Œ ìˆ˜ ìˆì–´ ì½”ë“œë¥¼ ì´í•´í•˜ê¸° ì‰½ë‹¤ëŠ” ê²ƒì´ë‹¤.
>
> íƒ€ì…ì„ ì œëŒ€ë¡œ ì‘ì„±í•œë‹¤ë©´ ì½”ë“œì˜ íƒ€ì…ë¿ë§Œ ì•„ë‹ˆë¼ ì½”ë“œì˜ ë¡œì§ë„ ì‰½ê²Œ ì´í•´í•  ìˆ˜ ìˆì„ ê²ƒì´ë‹¤.

## ì•„ì´í…œ28: ìœ íš¨í•œ ìƒíƒœë§Œ í‘œí˜„í•˜ëŠ” íƒ€ì…ì„ ì§€í–¥í•˜ê¸°

> íš¨ê³¼ì ìœ¼ë¡œ íƒ€ì…ì„ ì„¤ê³„í•˜ë ¤ë©´ ìœ íš¨í•œ ìƒíƒœë§Œ í‘œí˜„í•  ìˆ˜ ìˆëŠ” íƒ€ì…ì„ ë§Œë“¤ì–´ ë‚´ëŠ” ê²ƒì´ ê°€ì¥ ì¤‘ìš”í•˜ë‹¤.
>
> ì•„ì´í…œ28ì—ì„œëŠ” ì´ëŸ° ê´€ì ì—ì„œ íƒ€ì… ì„¤ê³„ê°€ ì˜ëª»ëœ ìƒí™©ì„ ì•Œì•„ë³´ê³  ì˜ˆì œë¥¼ í†µí•´ ì˜ëª»ëœ ì„¤ê³„ë¥¼ ë°”ë¡œ ì¡ì•„ë³´ì.

### ì˜ˆì‹œ) ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ - í˜ì´ì§€ ì„ íƒ ì‹œ í˜ì´ì§€ì˜ ë‚´ìš© ë¡œë“œ í›„ í™”ë©´ ë Œë”ë§

```typescript
inteface State {
  pageText: string;
  isLoading: boolean;
  error?: string;
}

function renderPage(state: State) {
  if (state.error) {
    return `Error! Unable to load ${currentPage}: ${state.error}`;
  } else if (state.isLoading) {
    return `Loading ${currentPage}...`;
  }
  return `<h1>${currentPage}</h1>\n${state.pageText}`;
}
```

ìœ„ì˜ ì½”ë“œë¥¼ ë³´ë©´ ë¶„ê¸° ì¡°ê±´ì´ ëª…í™•í•˜ê²Œ ë¶„ë¦¬ë˜ì–´ ìˆì§€ ì•Šë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤. isLoadingì´ trueê³  ë™ì‹œì— errorê°’ì´ ì¡´ì¬í•˜ë©´ ë¡œë”© ì¤‘ì¸ ìƒíƒœì¸ì§€ ì˜¤ë¥˜ê°€ ë°œìƒí•œ ìƒíƒœì¸ì§€ êµ¬ë¶„í•  ìˆ˜ ì—†ë‹¤.

### ì˜ˆì‹œ) ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ - í˜ì´ì§€ë¥¼ ì „í™˜í•˜ëŠ” ë©”ì„œë“œ

```typescript
async function changePage(state: State, newPage: string) {
  state.isLoading = true;
  try {
    const response = await fetch(getUrlForPage(newPage));
    if (!response.ok) {
      throw new Error(`Unable to load ${newPage}: ${response.statusText}`);
    }
    const text = await response.text();
    state.isLoading = false;
    state.pageText = text;
  } catch (e) {
    state.error = '' + e;
  }
}
```

`changePage` ë©”ì„œë“œì—ëŠ” ë§ì€ ë¬¸ì œì ì´ ìˆë‹¤.

- ì˜¤ë¥˜ê°€ ë°œìƒí–ˆì„ ë•Œ `state.isLoading`ì„ falseë¡œ ì„¤ì •í•˜ëŠ” ë¡œì§ì´ ë¹ ì ¸ìˆë‹¤.
- `state.error`ë¥¼ ì´ˆê¸°í™”í•˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì— í˜ì´ì§€ ì „í™˜ ì¤‘ì— ë¡œë”© ë©”ì„¸ì§€ ëŒ€ì‹  ê³¼ê±°ì˜ ì˜¤ë¥˜ ë©”ì„¸ì§€ë¥¼ ë³´ì—¬ì£¼ê²Œ ëœë‹¤. (?)
- í˜ì´ì§€ ë¡œë”© ì¤‘ì— ì‚¬ìš©ìê°€ í˜ì´ì§€ë¥¼ ë°”ê¿” ë²„ë¦¬ë©´ ì–´ë–¤ ì¼ì´ ë²Œì–´ì§ˆì§€ ì˜ˆìƒí•˜ê¸° ì–´ë µë‹¤. ìƒˆ í˜ì´ì§€ì— ì˜¤ë¥˜ê°€ ëœ¨ê±°ë‚˜ ì‘ë‹µì´ ì˜¤ëŠ” ìˆœì„œì— ë”°ë¼ ë‘ë²ˆì§¸ í˜ì´ì§€ê°€ ì•„ë‹Œ ì²« ë²ˆì§¸ í˜ì´ì§€ë¡œ ì „í™˜ë  ìˆ˜ë„ ìˆë‹¤.

**ìœ„ ì½”ë“œë“¤ì˜ ë¬¸ì œëŠ” `ìƒíƒœ ê°’ì˜ ë‘ ê°€ì§€ ì†ì„±ì´ ë™ì‹œì— ì •ë³´ê°€ ë¶€ì¡±í•˜ê±°ë‚˜(ìš”ì²­ì´ ì‹¤íŒ¨í•œ ê²ƒì¸ì§€ ì—¬ì „íˆ ë¡œë”© ì¤‘ì¸ì§€ ì•Œ ìˆ˜ ì—†ë‹¤)`, `ë‘ ê°€ì§€ ì†ì„±ì´ ì¶©ëŒ(ì˜¤ë¥˜ì´ë©´ì„œ ë™ì‹œì— ë¡œë”©ì¤‘ì¼ ìˆ˜ ìˆë‹¤)í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒ`ì´ë‹¤.**

State íƒ€ì…ì€ isLoadingì´ trueì´ë©´ì„œ ë™ì‹œì— error ê°’ì´ ì„¤ì •ë˜ëŠ” ë¬´íš¨í•œ ìƒíƒœë¥¼ í—ˆìš©í•œë‹¤. ë¬´íš¨í•œ ìƒíƒœê°€ ì¡´ì¬í•˜ë©´ render()ì™€ changePage() ë‘˜ ë‹¤ ì œëŒ€ë¡œ êµ¬í˜„í•  ìˆ˜ ì—†ê²Œ ëœë‹¤.

### ìœ„ì˜ ì˜ˆì œë“¤ì„ ì¡°ê¸ˆ ë” ì œëŒ€ë¡œ í‘œí˜„í•´ë³´ì.

```typescript
interface RequestPending {
  state: 'pending';
}
interface RequestError {
  state: 'error';
  error: string;
}
interface RequestSuccess {
  state: 'ok';
  pageText: string;
}
type RequestState = RequestPending | RequestError | RequestSuccess;

interface State {
  currentPage: string;
  requests: { [page: string]: RequestState };
}
```

- ìœ„ì˜ ì½”ë“œëŠ” ë„¤íŠ¸ì›Œí¬ ìš”ì²­ ê³¼ì • ê°ê°ì˜ ìƒíƒœë¥¼ ëª…ì‹œì ìœ¼ë¡œ ëª¨ë¸ë§í•˜ëŠ” `íƒœê·¸ëœ ìœ ë‹ˆì˜¨(state)`ì´ ì‚¬ìš©ë˜ì—ˆë‹¤.
- ì½”ë“œì˜ ê¸¸ì´ëŠ” ê¸¸ì–´ì¡Œì§€ë§Œ ë¬´íš¨í•œ ìƒíƒœë¥¼ í—ˆìš©í•˜ì§€ ì•Šë„ë¡ ê°œì„ ë˜ì—ˆë‹¤.

```typescript
function renderPage(state: State) {
  const { currentPage } = state;
  const requestState = state.requests[currentPage];
  switch (requestState.state) {
    case 'pending':
      return `Loading ${currentPage}...`;
    case 'error':
      return `Error! Unable to load ${currentPage}; ${requestState.error}`;
    case 'ok':
      return `<h1>${currentPage}</h1>\n${requestState.pageText}`;
  }
}

async function changePage(state: State, newPage: string) {
  state.requests[newPage] = { state: 'pending' };
  state.currentPage = newPage;

  try {
    const response = await fetch(getUrlForPage(newPage));
    if (!response.ok) {
      throw new Error(
        `Error! Unable to load ${newPage}; ${response.statusText}`
      );
    }
    const pageText = await response.text();
    state.requests[newPage] = { state: 'ok', pageText };
  } catch (e) {
    state.requests[newPage] = { state: 'error', error: '' + e };
  }
}
```

**renderPageì™€ changePageì˜ ëª¨í˜¸í•¨ì€ ì™„ì „íˆ ì‚¬ë¼ì¡Œë‹¤. í˜„ì¬ í˜ì´ì§€ê°€ ë¬´ì—‡ì¸ì§€ ëª…í™•í•˜ê³  ëª¨ë“  ìš”ì²­ì€ ì •í™•íˆ í•˜ë‚˜ì˜ ìƒíƒœë¡œ ë§ì•„ ë–¨ì–´ì§„ë‹¤. ê·¸ë¦¬ê³  ìš”ì²­ì´ ì§„í–‰ì¤‘ì¸ ìƒíƒœì—ì„œ ì‚¬ìš©ìê°€ í˜ì´ì§€ë¥¼ ë³€ê²½í•˜ë”ë¼ë„ ë¬¸ì œê°€ ë°œìƒí•˜ì§€ ì•Šì„ ê²ƒì´ë‹¤.**

### ì¶”ê°€ ì˜ˆì œ: ì—ì–´ë²„ìŠ¤ 330 ë¹„í–‰ê¸° ì‚¬ë¡€

> ì—ì–´ë²„ìŠ¤ 330ì˜ ì¡°ì¢…ì„ì—ëŠ” ê¸°ì¥ê³¼ ë¶€ê¸°ì¥ì„ ìœ„í•œ ë¶„ë¦¬ëœ ì œì–´ ì„¸íŠ¸ê°€ ìˆë‹¤. ì‚¬ì´ë“œ ìŠ¤í‹±ì€ ë¹„í–‰ê¸°ì˜ ì „ì§„ë°©í–¥ì„ ì œì–´í•œë‹¤. ë’¤ë¡œ ë‹¹ê¸°ë©´ ë¹„í–‰ê¸°ê°€ ì˜¬ë¼ê°€ê³  ì•ìœ¼ë¡œ ë°€ë©´ ì•„ë˜ë¡œ ë‚´ë ¤ê°€ëŠ” ë°©ì‹ì´ë‹¤. ì—ì–´ë²„ìŠ¤ 330ì€ ë‘ ê°œì˜ ì‚¬ì´ë“œ ìŠ¤í‹±ì´ ë…ë¦½ì ìœ¼ë¡œ ì›€ì§ì´ëŠ” ì´ì¤‘ ì…ë ¥ ëª¨ë“œ ì‹œìŠ¤í…œì„ ì‚¬ìš©í–ˆë‹¤.

```typescript
interface CockpitControls {
  // ì™¼ìª½ ì‚¬ì´ë“œ ìŠ¤í‹±ì˜ ê°ë„, 0 = ì¤‘ë¦½, + = ì•ìœ¼ë¡œ
  leftSideStick: number;
  // ì˜¤ë¥¸ìª½ ì‚¬ì´ë“œ ìŠ¤í‹±ì˜ ê°ë„, 0 = ì¤‘ë¦½, + = ì•ìœ¼ë¡œ
  rightSideStick: number;
}
```

ìœ„ì˜ ë°ì´í„° êµ¬ì¡°ì—ì„œ í˜„ì¬ ìŠ¤í‹±ì˜ ì„¤ì •ì„ ê³„ì‚°í•˜ëŠ” ë©”ì„œë“œë¥¼ ì‘ì„±í•´ë³´ì. ê¸°ì¥(ì™¼ìª½ìŠ¤í‹±)ì´ ì œì–´í•˜ê³  ìˆë‹¤ê³  í•œë‹¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.

```typescript
function getStickSetting(controls: CockpitControls) {
  return controls.leftSideStick;
}
```

ë§Œì•½ ë¶€ê¸°ì¥(ì˜¤ë¥¸ìª½ ìŠ¤í‹±)ì´ ì œì–´í•˜ê³  ìˆëŠ” ìƒí™©ì´ë¼ë©´ ê¸°ì¥ì˜ ìŠ¤í‹± ìƒíƒœëŠ” ì¤‘ë¦½ì¼ ê²ƒì´ë‹¤. ê²°ê³¼ì ìœ¼ë¡œ ê¸°ì¥ì´ë“  ë¶€ê¸°ì¥ì´ë“  ë‘˜ ì¤‘ í•˜ë‚˜ì˜ ìŠ¤í‹± ê°’ ì¤‘ì—ì„œ ì¤‘ë¦½ì´ ì•„ë‹Œ ê°’ì„ ì‚¬ìš©í•´ì•¼ í•œë‹¤.<br/>
**(ì¤‘ë¦½ì´ ì•„ë‹Œ ê°’ì„ ì‚¬ìš©í•´ì•¼ ë¹„í–‰ê¸°ë¥¼ ì œì–´í•  ìˆ˜ ìˆìœ¼ë‹ˆê¹!)**

```typescript
function getStickSetting(controls: CockpitControls) {
  const { leftSideStick, rightSideStick } = controls;
  if (leftSideStick === 0) {
    return rightSideStick;
  }
  return leftSideStick;
}

function getStickSetting(controls: CockpitControls) {
  const { leftSideStick, rightSideStick } = controls;
  if (leftSideStick === 0) {
    return rightSideStick;
  } else if (rightSideStick === 0) {
    return leftSideStick;
  }
  // ???
}
```

ì²« ë²ˆì§¸ í•¨ìˆ˜ëŠ” ì˜¤ë¥¸ìª½ ìŠ¤í‹±ì´ ì¤‘ë¦½ì¼ ë•Œì˜ ì¼€ì´ìŠ¤ê°€ ë¹ ì ¸ì„œ ë‘ ë²ˆì§¸ í•¨ìˆ˜ë¥¼ ì‘ì„±í–ˆë‹¤. ì´ì œ ë‘ ìŠ¤í‹±ì´ ëª¨ë‘ ì¤‘ë¦½ì´ ì•„ë‹Œ ê²½ìš°ë¥¼ ê³ ë ¤í•´ë³´ì. ë‘ ìŠ¤í‹±ì´ ë¹„ìŠ·í•œ ê°’ì´ë¼ë©´ ìŠ¤í‹±ì˜ ê°ë„ë¥¼ í‰ê· í•´ì„œ ê³„ì‚°í•  ìˆ˜ ìˆë‹¤.

```typescript
function getStickSetting(controls: CockpitControls) {
  const { leftSideStick, rightSideStick } = controls;
  if (leftSideStick === 0) {
    return rightSideStick;
  } else if (rightSideStick === 0) {
    return leftSideStick;
  }
  if (Math.abs(leftSideStick - rightSideStick) < 5) {
    return (leftSideStick + rightSideStick) / 2;
  }
  // ???
}
```

í•˜ì§€ë§Œ ë‘ ìŠ¤í‹±ì˜ ê°ë„ê°€ ë§¤ìš° ë‹¤ë¥¸ ê²½ìš°ëŠ” í•´ê²°í•˜ê¸° ì–´ë µë‹¤. ê·¸ë ‡ì§€ë§Œ í•´ê²°ì±… ì—†ì´ ì¡°ì¢…ì‚¬ì—ê²Œ ì—ëŸ¬ë¥¼ ë„ìš°ëŠ” ê²ƒì€ í˜„ì‹¤ì ìœ¼ë¡œ ë¶ˆê°€ëŠ¥í•˜ë‹¤. ë¹„í–‰ì¤‘ì´ê¸° ë•Œë¬¸ì— ìŠ¹ê°ì˜ ëª©ìˆ¨ì„ ìœ„í•´ì„œë¼ë„ ìŠ¤í‹±ì˜ ê°ë„ëŠ” ì–´ë–»ê²Œë“  ì„¤ì •ë˜ì–´ì•¼ í•œë‹¤.

ê·¸ëŸ°ë° ë¹„í–‰ê¸°ê°€ í­í’ì— íœ˜ë§ë¦¬ì ë¶€ê¸°ì¥ì´ ì¡°ìš©íˆ ì‚¬ì´ë“œ ìŠ¤í‹±ì„ ë’¤ë¡œ ë‹¹ê¸°ë©´ì„œ ê³ ë„ëŠ” ì˜¬ë¼ê°”ì§€ë§Œ ì†ë ¥ì´ ë–¨ì–´ì ¸ì„œ ìŠ¤í†¨(ì–‘ë ¥ì„ ìƒê³  í˜ì—†ì´ ë–¨ì–´ì§€ëŠ”) ìƒíƒœê°€ ë˜ì—ˆê³  ê³§ì´ì–´ ë¹„í–‰ê¸°ëŠ” ì¶”ë½í•˜ê¸° ì‹œì‘í–ˆë‹¤.

ì¡°ì¢…ì‚¬ë“¤ì€ ë¹„í–‰ ì¤‘ ìŠ¤í†¨ ìƒíƒœì— ë¹ ì§€ë©´ ìŠ¤í‹±ì„ ì•ìœ¼ë¡œ ë°€ì–´ì„œ ë¹„í–‰ê¸°ê°€ í•˜ê°•í•˜ë©´ì„œ ì†ë ¥ì„ ë‹¤ì‹œ ë†’ì´ë„ë¡ í›ˆë ¨ë°›ëŠ”ë‹¤. ê¸°ì¥ì€ í›ˆë ¨ëŒ€ë¡œ ìŠ¤í‹±ì„ ì•ìœ¼ë¡œ ë°€ì—ˆì§€ë§Œ ë¶€ê¸°ì¥ì€ ì—¬ì „íˆ ìŠ¤í‹±ì„ ë’¤ë¡œ ë‹¹ê¸°ê³  ìˆì—ˆë‹¤. ì´ ë•Œ ì—ì–´ë²„ìŠ¤ì˜ ê³„ì‚° í•¨ìˆ˜ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.

```typescript
function geetStickSetting(controls: CockpitControls) {
  return (controls.leftSideStick + controls.rightSideStick) / 2;
}
```

ê¸°ì¥ì´ ìŠ¤í‹±ì„ í˜ê» ì•ìœ¼ë¡œ ë°€ì–´ë´¤ì ë¶€ê¸°ì¥ì´ ë’¤ë¡œ ë‹¹ê¸°ê³  ìˆê¸° ë•Œë¬¸ì— í‰ê· ê°’ì—ëŠ” ë³€í•¨ì´ ì—†ë‹¤.
ì¤‘ë¦½ ìƒíƒœê¸° ë•Œë¬¸ì— ì—ì–´ë¹„ìŠ¤ëŠ” ì•„ë¬´ê²ƒë„ í•˜ì§€ ì•Šê²Œ ëœë‹¤.

**ìœ„ì˜ ì‚¬ë¡€ê°€ ë§í•˜ê³ ì í•˜ëŠ” ê²ƒì€ ì£¼ì–´ì§„ ì…ë ¥ìœ¼ë¡œ getStickSetting ë©”ì„œë“œë¥¼ êµ¬í˜„í•˜ëŠ” ì œëŒ€ë¡œ ëœ ë°©ë²•ì´ ì—†ë‹¤ëŠ” ê²ƒì´ë‹¤. ëŒ€ë¶€ë¶„ì˜ ë¹„í–‰ê¸°ëŠ” 2ê°œì˜ ìŠ¤í‹±ì´ ê¸°ê³„ì ìœ¼ë¡œ ì—°ê²°ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— ê¸°ì¥ì´ ë’¤ë¡œ ë‹¹ê¸´ë‹¤ë©´ ë¶€ê¸°ì¥ì˜ ìŠ¤í‹±ë„ ë’¤ë¡œ ë‹¹ê²¨ì§„ë‹¤.**

```typescript
interface CockpitControls {
  // ìŠ¤í‹±ì˜ ê°ë„, 0 = ì¤‘ë¦½, + = ì•ìœ¼ë¡œ
  stickAngle: number;
}
```

**ìˆœì„œë„(ì½”ë“œì˜ ë¡œì§)ì´ ë¶„ëª…í•´ì¡Œë‹¤. ê¸°ì¥ê³¼ ë¶€ê¸°ì¥ì„ êµ³ì´ ë‚˜ëˆŒ í•„ìš”ê°€ ì—†ê¸° ë•Œë¬¸ì— getStickSetting í•¨ìˆ˜ëŠ” ì „í˜€ í•„ìš”ê°€ ì—†ë‹¤.**

> íƒ€ì…ì„ ì„¤ê³„í•  ë•ŒëŠ” ì–´ë–¤ ê°’ë“¤ì„ í¬í•¨í•˜ê³  ì–´ë–¤ ê°’ë“¤ì„ ì œì™¸í• ì§€ ì‹ ì¤‘í•˜ê²Œ ìƒê°í•´ì•¼ í•œë‹¤. ìœ íš¨í•œ ìƒíƒœë¥¼ í‘œí˜„í•˜ëŠ” ê°’ë§Œ í—ˆìš©í•œë‹¤ë©´ ì½”ë“œë¥¼ ì‘ì„±í•˜ê¸° ì‰¬ì›Œì§€ê³  íƒ€ì… ì²´í¬ê°€ ìš©ì´í•´ì§„ë‹¤.

### ğŸ¤”ìš”ì•½ì •ë¦¬ğŸ¤”

> ìœ íš¨í•œ ìƒíƒœì™€ ë¬´íš¨í•œ ìƒíƒœë¥¼ ë‘˜ ë‹¤ í‘œí˜„í•˜ëŠ” íƒ€ì…ì€ í˜¼ë€ì„ ì´ˆë˜í•˜ê¸° ì‰½ê³  ì˜¤ë¥˜ë¥¼ ìœ ë°œí•˜ê²Œ ëœë‹¤.

> ìœ íš¨í•œ ìƒíƒœë§Œ í‘œí˜„í•˜ëŠ” íƒ€ì…ì„ ì§€í–¥í•´ì•¼ í•œë‹¤. ì½”ë“œê°€ ê¸¸ì–´ì§€ê±°ë‚˜ í‘œí˜„í•˜ê¸° ì–´ë µì§€ë§Œ ê²°êµ­ì€ ì‹œê°„ì„ ì ˆì•½í•˜ê³  ê³ í†µì„ ì¤„ì¼ ìˆ˜ ìˆë‹¤.

<br/>

## ì•„ì´í…œ29: ì‚¬ìš©í•  ë•ŒëŠ” ë„ˆê·¸ëŸ½ê²Œ, ìƒì„±í•  ë•ŒëŠ” ì—„ê²©í•˜ê²Œ

> TCP êµ¬í˜„ì²´ëŠ” ê²¬ê³ ì„±ì˜ ì¼ë°˜ì  ì›ì¹™ì„ ë”°ë¼ì•¼ í•œë‹¤. ë‹¹ì‹ ì˜ ì‘ì—…ì€ ì—„ê²©í•˜ê²Œ í•˜ê³ , ë‹¤ë¥¸ ì‚¬ëŒì˜ ì‘ì—…ì€ ë„ˆê·¸ëŸ½ê²Œ ë°›ì•„ë“¤ì—¬ì•¼ í•œë‹¤.

í•¨ìˆ˜ì˜ ì‹œê·¸ë‹ˆì²˜ì—ë„ ë¹„ìŠ·í•œ ê·œì¹™ì„ ì ìš©í•´ì•¼ í•œë‹¤. **í•¨ìˆ˜ì˜ ë§¤ê°œë³€ìˆ˜ëŠ” íƒ€ì…ì˜ ë²”ìœ„ê°€ ë„“ì–´ë„ ë˜ì§€ë§Œ ê²°ê³¼ë¥¼ ë°˜í™˜í•  ë•ŒëŠ” ì¼ë°˜ì ìœ¼ë¡œ íƒ€ì…ì˜ ë²”ìœ„ê°€ ë” êµ¬ì²´ì ì´ì–´ì•¼ í•œë‹¤.**

### ì˜ˆì‹œ: 3D ë§¤í•‘ API: ì¹´ë©”ë¼ ìœ„ì¹˜ë¥¼ ì§€ì •í•˜ê³  ê²½ê³„ ë°•ìŠ¤ì˜ ë·°í¬íŠ¸ë¥¼ ê³„ì‚°í•˜ëŠ” ë°©ë²•

```typescript
declare function setCamera(camera: CameraOptions): void;
declare function viewportForBounds(bounds: LngLatBounds): CameraOptions;

interface CameraOptions {
  center?: LngLat;
  zoom?: number;
  bearing?: number;
  pitch?: number;
}

type LngLat =
  | { lng: number; lat: number }
  | { lon: number; lat: number }
  | [number, number];
```

- viewportForBounds ë©”ì„œë“œë¥¼ í†µí•´ ê²½ê³„ ë°•ìŠ¤ì˜ ë·°í¬íŠ¸ë¥¼ ê³„ì‚°í•˜ê³  ê·¸ ê²°ê³¼ë¥¼ setCameraë¡œ ì „ë‹¬í•´ì¤€ë‹¤ë©´ ì¹´ë©”ë¼ ìœ„ì¹˜ë¥¼ ì¡ëŠ”ë° ë”ìš± ì¢‹ì„ ê²ƒì´ë‹¤.
- ì¼ë¶€ ê°’ì„ ê±´ë“œë¦¬ì§€ ì•Šìœ¼ë©´ì„œ ë™ì‹œì— ë‹¤ë¥¸ ê°’ì„ ì„¤ì •í•  ìˆ˜ ìˆì–´ì•¼ í•˜ê¸° ë•Œë¬¸ì— CameraOptionsì˜ ëª¨ë“  í•„ë“œëŠ” Optionalì´ë‹¤.
- LngLat íƒ€ì…ë„ setCameraì˜ ë§¤ê°œë³€ìˆ˜ ë²”ìœ„ë¥¼ ë„“í˜€ì¤€ë‹¤. ë§¤ê°œë³€ìˆ˜ë¡œ { lng, lat } ê°ì²´, { lon, lat } ê°ì²´ ë˜ëŠ” ìˆœì„œë§Œ ë§ë‹¤ë©´ [lng, lat] ìŒì„ ë„£ì„ ìˆ˜ë„ ìˆë‹¤.

viewportForBounds í•¨ìˆ˜ëŠ” ë˜ ë‹¤ë¥¸ ììœ ë¡œìš´ íƒ€ì…ì„ ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ëŠ”ë‹¤.

```typescript
type LngLatBounds =
  | { northeast: LngLat; southwest: LngLat }
  | [LngLat, LngLat]
  | [number, number, number, number];
```

ì´ë¦„ì´ ì£¼ì–´ì§„ ëª¨ì„œë¦¬, ìœ„ë„/ê²½ë„ ìŒ, ë˜ëŠ” ìˆœì„œë§Œ ë§ë‹¤ë©´ 4-íŠœí”Œì„ ì‚¬ìš©í•´ì„œ ê²½ê³„ë¥¼ ì§€ì •í•  ìˆ˜ ìˆë‹¤. LngLatëŠ” 3ê°€ì§€ í˜•íƒœë¥¼ ë°›ì„ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— LngLatBoundsê°€ ê°€ëŠ¥í•œ í˜•íƒœëŠ” ì´ 19ê°€ì§€ ì´ìƒìœ¼ë¡œ ë§¤ìš° ììœ ë¡œìš´ íƒ€ì…ì´ë‹¤.

ì´ì œ GeoJSON ê¸°ëŠ¥ì„ ì§€ì›í•˜ë„ë¡ ë·°í¬íŠ¸ë¥¼ ì¡°ì ˆí•˜ê³  ìƒˆ ë·°í¬íŠ¸ë¥¼ URLì— ì €ì¥í•˜ëŠ” í•¨ìˆ˜ë¥¼ ì‘ì„±í•´ë³´ì.

```typescript
function focusOnFeature(f: Feature) {
  const bounds = calculateBoundingBox(f);
  const camera = viewportForBounds(bounds);
  setCamera(camera);
  const {
    center: { lat, lng },
    zoom,
  } = camera;
  //          ~~~~~ ...í˜•ì‹ì— 'lat' ì†ì„±ì´ ì—†ìŠµë‹ˆë‹¤.
  //               ~~~~~ ...í˜•ì‹ì— 'lng' ì†ì„±ì´ ì—†ìŠµë‹ˆë‹¤.

  window.location.search = ~
}
```

- **latê³¼ lng ì†ì„±ì´ ì—†ê³  zoom ì†ì„±ë§Œ ì¡´ì¬í•˜ê¸° ë•Œë¬¸ì— ë°œìƒí–ˆì§€ë§Œ zoomì˜ íƒ€ì…ì´ number | undefinedë¡œ ì¶”ë¡ ë˜ëŠ” ê²ƒë„ ë¬¸ì œì´ë‹¤. (?)**
- viewportForBoundsì˜ íƒ€ì… ì„ ì–¸ì´ ì‚¬ìš©ë  ë•Œë¿ë§Œ ì•„ë‹ˆë¼ ë§Œë“¤ì–´ì§ˆ ë•Œì—ë„ ë„ˆë¬´ ììœ ë¡­ë‹¤ëŠ” ê²ƒì´ë‹¤.
- camera ê°’ì„ ì•ˆì „í•œ íƒ€ì…ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ìœ ì¼í•œ ë°©ë²•ì€ **ìœ ë‹ˆì˜¨ íƒ€ì…ì˜ ê° ìš”ì†Œë³„ë¡œ ì½”ë“œë¥¼ ë¶„ê¸°í•˜ëŠ” ê²ƒ**ì´ë‹¤.
- ìˆ˜ë§ì€ ì„ íƒì  ì†ì„±ì„ ê°€ì§€ëŠ” ë°˜í™˜íƒ€ì…ê³¼ ìœ ë‹ˆì˜¨ íƒ€ì…ì€ viewportForBoundsë¥¼ ì‚¬ìš©í•˜ê¸° ì–´ë µê²Œ ë§Œë“ ë‹¤.
- **ë§¤ê°œë³€ìˆ˜ íƒ€ì…ì˜ ë²”ìœ„ê°€ ë„“ìœ¼ë©´ ì‚¬ìš©í•˜ê¸° í¸ë¦¬í•˜ì§€ë§Œ ë°˜í™˜ íƒ€ì…ì˜ ë²”ìœ„ê°€ ë„“ìœ¼ë©´ ë¶ˆí¸í•˜ë‹¤.**

```typescript
interface LngLat {
  lng: number;
  lat: number;
}
type LngLatLike = LngLat | { lon: number; lat: number } | [number, number];

interface Camera {
  center: LngLat;
  zoom: number;
  bearing: number;
  pitch: number;
}
interface CameraOptions extends Omit<Partial<Camera>, 'center'> {
  center?: LngLatLike;
}
interface CameraOptions {
  center?: LngLatLike;
  zoom?: number;
  bearing: number;
  pitch?: number;
}

type LngLatBounds =
  | { northeast: LngLatLike; southwest: LngLatLike }
  | [LngLatLike, LngLatLike]
  | [number, number, number, number];

declare function setCamera(camera: CameraOptions): void;
declare function viewportForBounds(bounds: LngLatBounds): Camera;

function focusOnFeature(f: Feature) {
  const bounds = calculateBoundingBox(f);
  const camera = viewportForBounds(bounds);
  setCamera(camera);
  const {
    center: { lat, lng },
    zoom,
  } = camera;
  zoom; // íƒ€ì…ì€ number
  window.location.search = ~
}
```

### ğŸ¤”ìš”ì•½ì •ë¦¬ğŸ¤”

> ë³´í†µ ë§¤ê°œë³€ìˆ˜ íƒ€ì…ì€ ë°˜í™˜ íƒ€ì…ì— ë¹„í•´ ë²”ìœ„ê°€ ë„“ì€ ê²½í–¥ì´ ìˆë‹¤. ì„ íƒì  ì†ì„±ê³¼ ìœ ë‹ˆì˜¨ íƒ€ì…ì€ ë°˜í™˜ íƒ€ì…ë³´ë‹¤ ë§¤ê°œë³€ìˆ˜ íƒ€ì…ì— ë” ì¼ë°˜ì ì´ë‹¤.

> ë§¤ê°œë³€ìˆ˜ì™€ ë°˜í™˜ íƒ€ì…ì˜ ì¬ì‚¬ìš©ì„ ìœ„í•´ì„œ ê¸°ë³¸ í˜•íƒœ(ë°˜í™˜ íƒ€ì…)ì™€ ëŠìŠ¨í•œ í˜•íƒœ(ë§¤ê°œë³€ìˆ˜ íƒ€ì…)ì„ ë„ì…í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.

<br/>

## ì•„ì´í…œ30: ë¬¸ì„œì— íƒ€ì… ì •ë³´ë¥¼ ì“°ì§€ ì•Šê¸°

```typescript
/**
 * ì „ê²½ìƒ‰(foreground) ë¬¸ìì—´ì„ ë°˜í™˜í•œë‹¤.
 * 0ê°œ ë˜ëŠ” 1ê°œì˜ ë§¤ê°œë³€ìˆ˜ë¥¼ ë°›ëŠ”ë‹¤.
 * ë§¤ê°œë³€ìˆ˜ê°€ ì—†ì„ ë•ŒëŠ” í‘œì¤€ ì „ê²½ìƒ‰ì„ ë°˜í™˜í•œë‹¤.
 * ë§¤ê°œë³€ìˆ˜ê°€ ìˆì„ ë•ŒëŠ” íŠ¹ì • í˜ì´ì§€ì˜ ì „ê²½ìƒ‰ì„ ë°˜í™˜í•œë‹¤.
 */
function getForegroundColor(page?: string) {
  return page === 'login' ? { r: 127, g: 127, b: 127 } : { r: 0, g: 0, b: 0 };
}
```

- ì½”ë“œì™€ ì£¼ì„ì´ ì¼ì¹˜í•˜ì§€ ì•ŠëŠ”ë‹¤ => "ì½”ë“œì™€ ì£¼ì„ì´ ë§ì§€ ì•ŠëŠ”ë‹¤ë©´ ë‘˜ ë‹¤ ì˜ëª»ëœ ê²ƒì´ë‹¤!"
- ë§Œì•½ ì½”ë“œê°€ ì •ìƒì ì´ë¼ë©´ ë‹¤ìŒê³¼ ê°™ì€ ë¬¸ì œì ì´ ìˆë‹¤.

  - í•¨ìˆ˜ê°€ string í˜•íƒœì˜ ìƒ‰ê¹”ì„ ë°˜í™˜í•œë‹¤ê³  ë˜ì–´ìˆì§€ë§Œ ì‹¤ì œë¡œëŠ” ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤.
  - ì£¼ì„ì—ëŠ” í•¨ìˆ˜ê°€ 0ê°œ ë˜ëŠ” 1ê°œì˜ ë§¤ê°œë³€ìˆ˜ë¥¼ ë°›ëŠ”ë‹¤ê³  ì„¤ëª…í•˜ì§€ë§Œ íƒ€ì… ì‹œê·¸ë‹ˆì²˜ë§Œ ë´ë„ ì•Œ ìˆ˜ ìˆëŠ” ì •ë³´ì´ë‹¤.
  - ë¶ˆí•„ìš”í•˜ê²Œ ì¥í™©í•˜ë‹¤. í•¨ìˆ˜ ì„ ì–¸ê³¼ êµ¬í˜„ì²´ë³´ë‹¤ ì£¼ì„ì´ ë” ê¸¸ë‹¤.

- **íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ì˜ íƒ€ì… êµ¬ë¬¸ ì‹œìŠ¤í…œì€ ê°„ê²°í•˜ê³  êµ¬ì²´ì ì´ê³  ì‰½ê²Œ ì½ì„ ìˆ˜ ìˆë„ë¡ ì„¤ê³„ë˜ì—ˆë‹¤.**
- **í•¨ìˆ˜ì˜ ì…ë ¥ê³¼ ì¶œë ¥ì˜ íƒ€ì…ì„ ì½”ë“œë¡œ í‘œí˜„í•˜ëŠ” ê²ƒì´ ì£¼ì„ë³´ë‹¤ ë” ë‚˜ì€ ë°©ë²•ì´ë¼ëŠ” ê²ƒ**
- **íƒ€ì… êµ¬ë¬¸ì€ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ ì»´íŒŒì¼ëŸ¬ê°€ ì²´í¬í•´ì£¼ê¸° ë•Œë¬¸ì— êµ¬í˜„ì²´ì™€ì˜ ì •í•©ì„±ì´ ì–´ê¸‹ë‚˜ì§€ ì•ŠëŠ”ë‹¤.**

**ì£¼ì„ì€ ì½”ë“œì™€ ë™ê¸°í™”ë˜ì§€ ì•ŠëŠ”ë‹¤. í•˜ì§€ë§Œ íƒ€ì… êµ¬ë¬¸ì€ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ íƒ€ì… ì²´ì»¤ê°€ íƒ€ì… ì •ë³´ë¥¼ ë™ê¸°í™”í•˜ë„ë¡ ê°•ì œí•œë‹¤. ì£¼ì„ ëŒ€ì‹  íƒ€ì… ì •ë³´ë¥¼ ì‘ì„±í•œë‹¤ë©´ ì½”ë“œê°€ ë³€ê²½ëœë‹¤ í•˜ë”ë¼ë„ ì •ë³´ê°€ ì •í™•íˆ ë™ê¸°í™”ëœë‹¤.**

```typescript
/** ì• í”Œë¦¬ì¼€ì´ì…˜ ë˜ëŠ” íŠ¹ì • í˜ì´ì§€ì˜ ì „ê²½ìƒ‰ì„ ê°€ì ¸ì˜µë‹ˆë‹¤. **/
function getForegroundColor(page?: string): Color {
  // ...
}
```

íŠ¹ì • ë§¤ê°œë³€ìˆ˜ë¥¼ ì„¤ëª…í•˜ê³  ì‹¶ë‹¤ë©´ `JSDocì˜ @param êµ¬ë¬¸`ì„ ì‚¬ìš©í•˜ì.

ê·¸ë¦¬ê³  ì˜ˆë¥¼ ë“¤ì–´ "ê°’ì„ ë³€ê²½í•˜ì§€ ì•ŠëŠ”ë‹¤" ê³  ì£¼ì„ì„ ì ì„ ë°”ì—ëŠ” `readonly ì†ì„±`ì„ ë¶™ì—¬ì£¼ì.

ë§ˆì§€ë§‰ìœ¼ë¡œ ì£¼ì„ì— ì ìš©í•œ ê·œì¹™ì€ ë³€ìˆ˜ëª…ì—ë„ ê·¸ëŒ€ë¡œ ì ìš©í•  ìˆ˜ ìˆëŠ”ë° **ë³€ìˆ˜ëª…ì— íƒ€ì… ì •ë³´ë¥¼ ë„£ì§€ë§ì.**
ì˜ˆë¥¼ ë“¤ì–´ ë³€ìˆ˜ëª…ì„ `ageNum`ìœ¼ë¡œ í•˜ëŠ” ê²ƒ ë³´ë‹¤ëŠ” **ageë¡œ í•˜ê³  ê·¸ íƒ€ì…ì´ numberì„ì„ ëª…ì‹œí•˜ëŠ”ê²Œ ì¢‹ë‹¤.**

í•˜ì§€ë§Œ ë‹¨ìœ„ê°€ ìˆëŠ” ìˆ«ìë“¤ì€ ì˜ˆì™¸ë‹¤. ë‹¨ìœ„ê°€ ë¬´ì—‡ì¸ì§€ í™•ì‹¤í•˜ì§€ ì•Šë‹¤ë©´ ë³€ìˆ˜ëª… ë˜ëŠ” ì†ì„± ì´ë¦„ì— ë‹¨ìœ„ë¥¼ í¬í•¨í•˜ì. `(timeMs, temperatureC)`

### ğŸ¤”ìš”ì•½ì •ë¦¬ğŸ¤”

> ì£¼ì„ê³¼ ë³€ìˆ˜ëª…ì— íƒ€ì… ì •ë³´ë¥¼ ì ëŠ” ê²ƒì€ í”¼í•´ì•¼ í•œë‹¤. íƒ€ì… ì„ ì–¸ì´ ì¤‘ë³µë˜ëŠ” ê²ƒìœ¼ë¡œ ëë‚˜ë©´ ë‹¤í–‰ì´ì§€ë§Œ ìµœì•…ì˜ ê²½ìš°ëŠ” íƒ€ì… ì •ë³´ì— ëª¨ìˆœì´ ë°œìƒí•˜ê²Œ ëœë‹¤.

> íƒ€ì…ì´ ëª…í™•í•˜ì§€ ì•Šì€ ê²½ìš°ëŠ” ë³€ìˆ˜ëª…ì— ë‹¨ìœ„ ì •ë³´ë¥¼ í¬í•¨í•˜ëŠ” ê²ƒì„ ê³ ë ¤í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤. (ì˜ˆë¥¼ ë“¤ì–´ timeMs ë˜ëŠ” temperatureC)
