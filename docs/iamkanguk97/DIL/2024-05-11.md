# DIL: ì´í™í‹°ë¸Œ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸

> ìŠ¤í„°ë””: ì›”ê°„ CS, https://github.com/monthly-cs/2024-05-effective-typescript  
> ì‘ì„±ì¼: 2024-05-011  
> ì‘ì„±ì: iamkanguk97

---

## ì•„ì´í…œ3: ì½”ë“œ ìƒì„±ê³¼ íƒ€ì…ì´ ê´€ê³„ì—†ìŒì„ ì´í•´í•˜ê¸°

### íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ ì»´íŒŒì¼ëŸ¬

- **íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ ì»´íŒŒì¼ëŸ¬ëŠ” í¬ê²Œ 2ê°€ì§€ ì—­í• ì„ ìˆ˜í–‰í•œë‹¤.**
  - **ìµœì‹  íƒ€ì…ìŠ¤í¬ë¦½íŠ¸/ìë°”ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë¸Œë¼ìš°ì €ì—ì„œ ë™ì‘í•  ìˆ˜ ìˆë„ë¡ êµ¬ë²„ì „ì˜ ìë°”ìŠ¤í¬ë¦½íŠ¸ë¡œ `íŠ¸ëœìŠ¤íŒŒì¼(transpile)` í•œë‹¤.**
    - transpile = translate(ë²ˆì—­) + compile(ì»´íŒŒì¼)
    - ì†ŒìŠ¤ì½”ë“œë¥¼ ë™ì¼í•œ ë™ì‘ì„ í•˜ëŠ” ë‹¤ë¥¸ í˜•íƒœì˜ ì†ŒìŠ¤ì½”ë“œë¡œ ë³€í™˜í•˜ëŠ” í–‰ìœ„ë¥¼ ì˜ë¯¸í•œë‹¤. ê²°ê³¼ë¬¼ì´ ì—¬ì „íˆ ì»´íŒŒì¼ë˜ì–´ì•¼ í•˜ëŠ” ì†ŒìŠ¤ì½”ë“œì´ê¸° ë•Œë¬¸ì— ì»´íŒŒì¼ê³¼ëŠ” êµ¬ë¶„í•œë‹¤.
  - **ì½”ë“œì˜ íƒ€ì… ì˜¤ë¥˜ë¥¼ ì²´í¬í•œë‹¤.**
  - ì´ 2ê°€ì§€ ì—­í• ì„ ì„œë¡œ ë…ë¦½ì ì´ë‹¤. íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ê°€ ìë°”ìŠ¤í¬ë¦½íŠ¸ë¡œ ë³€í™˜ë  ë•Œ ì½”ë“œ ë‚´ì˜ íƒ€ì…ì—ëŠ” ì˜í–¥ì„ ì£¼ì§€ ì•ŠëŠ”ë‹¤. ë˜í•œ ê·¸ ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ ì‹¤í–‰ ì‹œì ì—ë„ íƒ€ì…ì€ ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•ŠëŠ”ë‹¤.

### íƒ€ì… ì˜¤ë¥˜ê°€ ìˆëŠ” ì½”ë“œë„ ì»´íŒŒì¼ì´ ê°€ëŠ¥í•˜ë‹¤.

```typescript
// cat test.ts
let x = 'hello';
x = 1234;

// tsc test.ts
// test.ts:2:1 - error TS2322: '1234' í˜•ì‹ì€ 'string' í˜•ì‹ì— í• ë‹¹í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.

// cat test.js
var x = 'hello';
x = 1234;
```

- **ì»´íŒŒì¼ì€ íƒ€ì… ì²´í¬ì™€ ë…ë¦½ì ìœ¼ë¡œ ë™ì‘í•˜ê¸° ë•Œë¬¸ì— íƒ€ì… ì˜¤ë¥˜ê°€ ìˆëŠ” ì½”ë“œë„ ì»´íŒŒì¼ì´ ê°€ëŠ¥í•˜ë‹¤.**
- ì°¸ê³ ) Cì™€ Java ê°™ì€ ì–¸ì–´ëŠ” íƒ€ì… ì²´í¬ì™€ ì»´íŒŒì¼ì´ ë™ì‹œì— ì´ë£¨ì–´ì§„ë‹¤. ë”°ë¼ì„œ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ ì˜¤ë¥˜ëŠ” Cë‚˜ Java ê°™ì€ ì–¸ì–´ë“¤ì˜ ê²½ê³ ì™€ ë¹„ìŠ·í•˜ë‹¤ + íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ëŠ” ë¬¸ì œê°€ ë˜ëŠ” ë¶€ë¶„ì„ ì•Œë ¤ì£¼ì§€ë§Œ **ë¹Œë“œë¥¼ ë©ˆì¶”ì§€ëŠ” ì•ŠëŠ”ë‹¤.**
- ë§Œì•½ ì˜¤ë¥˜ê°€ ìˆì„ ë•Œ ì»´íŒŒì¼í•˜ì§€ ì•Šìœ¼ë ¤ë©´ tsconfig.jsonì— noEmitOnErrorë¥¼ ì„¤ì •í•˜ì.

> **ğŸ” ì»´íŒŒì¼ê³¼ íƒ€ì… ì²´í¬**<br/>
>
> - ì½”ë“œì— ì˜¤ë¥˜ê°€ ìˆì„ ë•Œ "ì»´íŒŒì¼ì— ë¬¸ì œê°€ ìˆë‹¤" ê°€ ì•„ë‹ˆë¼ "íƒ€ì… ì²´í¬ì— ë¬¸ì œê°€ ìˆë‹¤" ê³  í‘œí˜„í•˜ëŠ” ê²ƒì´ ë§ë‹¤.
> - ì»´íŒŒì¼ = ì½”ë“œ ìƒì„±ë§Œ! => ì‘ì„±í•œ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ê°€ ìœ íš¨í•˜ë©´ ì»´íŒŒì¼í•œë‹¤.

### ëŸ°íƒ€ì„ì—ëŠ” íƒ€ì… ì²´í¬ê°€ ë¶ˆê°€ëŠ¥í•˜ë‹¤.

```typescript
interface Square {
  width: number;
}

interface Rectangle extends Square {
  height: number;
}

type Shape = Square | Rectangle;

function calculateArea(shape: Shape) {
  if (shape instanceof Rectangle) {
    // ~~~~~~~~~ 'Rectangle'ì€ í˜•ì‹ë§Œ ì°¸ì¡°í•˜ì§€ë§Œ ì—¬ê¸°ì„œëŠ” ê°’ìœ¼ë¡œ ì‚¬ìš©ë˜ê³  ìˆìŠµë‹ˆë‹¤.
    return shape.width * shape.height;
    //         ~~~~~~~ 'Shape' í˜•ì‹ì— 'height' ì†ì„±ì´ ì—†ìŠµë‹ˆë‹¤.
  } else {
    return shape.width * shape.width;
  }
}
```

- instanceof ì²´í¬ëŠ” ëŸ°íƒ€ì„ì— ì¼ì–´ë‚˜ì§€ë§Œ, Rectangleì€ íƒ€ì…ì´ê¸° ë•Œë¬¸ì— ëŸ°íƒ€ì„ ì‹œì ì— ì•„ë¬´ëŸ° ì—­í• ì„ í•  ìˆ˜ ì—†ë‹¤.
  - ì°¸ê³ ) instanceofëŠ” í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ í™•ì¸í•  ë•Œ ì‚¬ìš©í•œë‹¤.
- íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ì˜ íƒ€ì…ì€ 'ì œê±° ê°€ëŠ¥(eraseable)' í•˜ë‹¤.

### ëŸ°íƒ€ì„ì— íƒ€ì… ì •ë³´ë¥¼ ìœ ì§€í•˜ëŠ” ë°©ë²•1 => ì†ì„± ì¡´ì¬ í™•ì¸

```typescript
function calculateArea(shape: Shape) {
  if ('height' in shape) {
    shape; // íƒ€ì…ì´ Rectangle
    return shape.width * shape.height;
  } else {
    shape; // íƒ€ì…ì´ Square
    return shape.width * shape.width;
  }
}
```

- ì†ì„± ì²´í¬ëŠ” ëŸ°íƒ€ì„ì— ì ‘ê·¼ ê°€ëŠ¥í•œ ê°’ì—ë§Œ ê´€ë ¨ë˜ì§€ë§Œ íƒ€ì… ì²´ì»¤ ì—­ì‹œë„ shapeì˜ íƒ€ì…ì„ Rectangleë¡œ ë³´ì •í•˜ê¸° ë•Œë¬¸ì— ì˜¤ë¥˜ê°€ ì‚¬ë¼ì§„ë‹¤.

### ëŸ°íƒ€ì„ì— íƒ€ì… ì •ë³´ë¥¼ ìœ ì§€í•˜ëŠ” ë°©ë²•2 => íƒœê·¸ ê¸°ë²•

```typescript
interface Square {
  kind: 'square'; // ëŸ°íƒ€ì„ì— ì ‘ê·¼ ê°€ëŠ¥í•œ íƒ€ì… ì •ë³´ë¥¼ ì €ì¥í•˜ëŠ” íƒœê·¸!!
  width: number;
}

interface Rectangle {
  kind: 'rectangle';
  height: number;
  width: number;
}

type Shape = Square | Rectangle;

function calculateArea(shape: Shape) {
  if (shape.kind === 'rectangle') {
    shape; // íƒ€ì…ì´ Rectangle
    return shape.width * shape.height;
  } else {
    shape; // íƒ€ì…ì´ Square
    return shape.width * shape.width;
  }
}
```

- Shape íƒ€ì…ì€ `íƒœê·¸ëœ ìœ ë‹ˆì˜¨(tagged union)` ì˜ í•œ ì˜ˆì‹œì´ë‹¤.
- ëŸ°íƒ€ì„ì— íƒ€ì… ì •ë³´ë¥¼ ì†ì‰½ê²Œ ìœ ì§€í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— í”í•˜ê²Œ ë³¼ ìˆ˜ ìˆëŠ” ê¸°ë²•ì´ë‹¤.

### ëŸ°íƒ€ì„ì— íƒ€ì… ì •ë³´ë¥¼ ìœ ì§€í•˜ëŠ” ë°©ë²•3 => í´ë˜ìŠ¤

```typescript
class Square {
  constructor(public width: number) {}
}

class Rectangle extends Square {
  constructor(public width: number, public height: number) {
    super(width);
  }
}

type Shape = Square | Rectangle; // íƒ€ì…ìœ¼ë¡œ ì°¸ì¡°ë¨

function calculateArea(shape: Shape) {
  if (shape instanceof Rectangle) {
    // ê°’ìœ¼ë¡œ ì°¸ì¡°ë¨
    shape; // íƒ€ì…ì´ Rectangle
    return shape.width * shape.height;
  } else {
    shape; // íƒ€ì…ì´ Square
    return shape.width * shape.width;
  }
}
```

- íƒ€ì…(ëŸ°íƒ€ì„ ì ‘ê·¼ ë¶ˆê°€)ê³¼ ê°’(ëŸ°íƒ€ì„ ì ‘ê·¼ ê°€ëŠ¥)ì„ ë‘˜ ë‹¤ ì‚¬ìš©í•˜ëŠ” ê¸°ë²•ì´ í´ë˜ìŠ¤ì´ë‹¤.
- ì¸í„°í˜ì´ìŠ¤ëŠ” íƒ€ì…ìœ¼ë¡œë§Œ ì‚¬ìš© ê°€ëŠ¥í•˜ì§€ë§Œ, Rectangleì„ í´ë˜ìŠ¤ë¡œ ì„ ì–¸í•˜ë©´ íƒ€ì…ê³¼ ê°’ ëª¨ë‘ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

### íƒ€ì… ì—°ì‚°ì€ ëŸ°íƒ€ì„ì— ì˜í–¥ì„ ì£¼ì§€ ì•ŠëŠ”ë‹¤

```typescript
function asNumber(val: number | string): number {
  return val as number;
}

function asNumber(val) {
  return val;
}
```

- ìœ„ì˜ ì½”ë“œëŠ” string ë˜ëŠ” number íƒ€ì…ì¸ ê°’ì„ í•­ìƒ numberë¡œ ì •ì œí•˜ëŠ” ê²½ìš°ì´ë‹¤.
- ìœ„ì˜ ì½”ë“œëŠ” íƒ€ì… ì²´ì»¤ë¥¼ í†µê³¼í•˜ì§€ë§Œ ì˜ëª»ëœ ë°©ë²•ì´ë‹¤.
- `as number`
  - íƒ€ì… ë‹¨ì–¸ë¬¸ (Type Assertion)
  - íƒ€ì… ë‹¨ì–¸ì€ íƒ€ì… ì—°ì‚°ì´ê³  ëŸ°íƒ€ì„ ë™ì‘ì—ëŠ” ì•„ë¬´ëŸ° ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•ŠëŠ”ë‹¤.
  - ê°’ì„ ì •ì œí•˜ê¸° ìœ„í•´ì„œëŠ” ëŸ°íƒ€ì„ì˜ íƒ€ì…ì„ ì²´í¬í•´ì•¼ í•˜ê³  ìë°”ìŠ¤í¬ë¦½íŠ¸ ì—°ì‚°ì„ í†µí•´ ë³€í™˜ì„ ìˆ˜í–‰í•´ì•¼ í•œë‹¤.

### ëŸ°íƒ€ì„ íƒ€ì…ì€ ì„ ì–¸ëœ íƒ€ì…ê³¼ ë‹¤ë¥¼ ìˆ˜ ìˆë‹¤.

- íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ëŠ” ì¼ë°˜ì ìœ¼ë¡œ ì‹¤í–‰ë˜ì§€ ëª»í•˜ëŠ” ì£½ì€(dead) ì½”ë“œë¥¼ ì°¾ì•„ë‚¸ë‹¤.

### íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ íƒ€ì…ìœ¼ë¡œëŠ” í•¨ìˆ˜ë¥¼ ì˜¤ë²„ë¡œë“œí•  ìˆ˜ ì—†ë‹¤.

```typescript
function add(a: number, b: number) {
  //     ~~~ ì¤‘ë³µëœ í•¨ìˆ˜ êµ¬í˜„ì…ë‹ˆë‹¤.
  return a + b;
}

function add(a: string, b: string) {
  //     ~~~ ì¤‘ë³µëœ í•¨ìˆ˜ êµ¬í˜„ì…ë‹ˆë‹¤.
  return a + b;
}
```

- C++ ê°™ì€ ì–¸ì–´ì—ì„œëŠ” í•¨ìˆ˜ ì˜¤ë²„ë¡œë”©ì´ ê°€ëŠ¥í•˜ë‹¤. í•˜ì§€ë§Œ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ëŠ” ì˜¤ë²„ë¡œë”©ì´ ì•ˆëœë‹¤.

<br/>

## ì•„ì´í…œ5: any íƒ€ì… ì§€ì–‘í•˜ê¸°

- íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ì˜ íƒ€ì… ì‹œìŠ¤í…œì€ ì ì§„ì (gradual)ì´ê³  ì„ íƒì (optional)ì´ë‹¤.
