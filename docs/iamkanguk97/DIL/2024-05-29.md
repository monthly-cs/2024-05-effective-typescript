# DIL: ì´í™í‹°ë¸Œ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸

> ìŠ¤í„°ë””: ì›”ê°„ CS, https://github.com/monthly-cs/2024-05-effective-typescript  
> ì‘ì„±ì¼: 2024-05-29<br/>
> ì‘ì„±ì: iamkanguk97

---

## ì•„ì´í…œ31: íƒ€ì… ì£¼ë³€ì— null ê°’ ë°°ì¹˜í•˜ê¸°

```typescript
function extent(nums: number[]) {
  let min, max;
  for (const num of nums) {
    if (!min) {
      min = num;
      max = num;
    } else {
      min = Math.min(min, num);
      max = Math.max(max, num);
    }
  }
  return [min, max];
}
```

- ìœ„ì˜ ì½”ë“œëŠ” `strictNullChecks`ê°€ ë”°ë¡œ í™œì„±í™”ê°€ ë˜ì–´ìˆì§€ ì•Šìœ¼ë©´ íƒ€ì… ì²´ì»¤ë¥¼ í†µê³¼í•˜ê³  ë°˜í™˜ íƒ€ì…ì€ number[]ë¡œ ì¶”ë¡ ëœë‹¤. í•˜ì§€ë§Œ ìœ„ì˜ ì½”ë“œì—ëŠ” ëª‡ ê°€ì§€ ê²°í•¨ì´ ìˆë‹¤.
- **ìµœì†Ÿê°’ì´ë‚˜ ìµœëŒ“ê°’ì´ 0ì´ë©´ ê°’ì´ ë§ì”Œì›Œì§„ë‹¤.**
- **nums ë°°ì—´ì´ ë¹ˆ ë°°ì—´ì´ë¼ë©´ í•¨ìˆ˜ëŠ” [undefined, undefined]ë¥¼ ë°˜í™˜í•œë‹¤.**

undefinedë¥¼ í¬í•¨í•˜ëŠ” ê°ì²´ëŠ” ë‹¤ë£¨ê¸° ì–´ë µê³  ì ˆëŒ€ ê¶Œì¥í•˜ì§€ ì•ŠëŠ”ë‹¤.

`strictNullChecks`ë¥¼ í™œì„±í™”í•˜ë©´ max ë³€ìˆ˜ìª½ì—ì„œ undefinedê°€ ê°€ëŠ¥í•˜ë‹¤ê³  ì—ëŸ¬ë¥¼ ë°œìƒì‹œí‚¨ë‹¤. ê·¸ëŸ¬ë¯€ë¡œ extent ë©”ì„œë“œì˜ ë°˜í™˜ íƒ€ì…ì€ `(number | undefined)[]` ê°€ ë˜ë©´ì„œ ì„¤ê³„ì  ê²°í•¨ì´ ë¶„ëª…í•´ì¡Œë‹¤.

ìœ„ì˜ ë¬¸ì œë¥¼ í•´ê²°í•´ë³´ì. minê³¼ maxë¥¼ í•œ ê°ì²´ ì•ˆì— ë„£ê³  nullì´ê±°ë‚˜ nullì´ ì•„ë‹ˆê²Œ í•˜ë©´ ëœë‹¤.

```typescript
function extent(nums: number[]) {
  let result: [number, number] | null = null;
  for (const num of nums) {
    if (!result) {
      result = [num, num];
    } else {
      result = [Math.min(num, result[0]), Math.max(num, result[1])];
    }
  }
  return result;
}
```

ìœ„ ë©”ì„œë“œì˜ ë°˜í™˜ íƒ€ì…ì´ `[number, number] | null`ì´ ë˜ì–´ì„œ ì‚¬ìš©í•˜ê¸° ë”ìš± ìˆ˜ì›”í•´ì¡Œë‹¤.
`null ì•„ë‹˜ ë‹¨ì–¸ ì—°ì‚°ì` ë¥¼ ì‚¬ìš©í•˜ê±°ë‚˜ ë‹¨ìˆœ ì¡°ê±´ë¬¸ìœ¼ë¡œ ì²´í¬í•  ìˆ˜ ìˆë‹¤.

```typescript
const [min, max] = extent([0, 1, 2])!;
const span = max - min;

const range = extent([0, 1, 2]);
if (range) {
  const [min, max] = range;
  const span = max - min;
}
```

extentì˜ ê²°ê´ê°’ìœ¼ë¡œ ë‹¨ì¼ ê°ì²´(ë°°ì—´)ì„ ì‚¬ìš©í•˜ë©´ì„œ ì„¤ê³„ë¥¼ ê°œì„ í–ˆê³  ë²„ê·¸ë„ ì œê±°í•  ìˆ˜ ìˆì—ˆë‹¤.

**nullê³¼ nullì´ ì•„ë‹Œ ê°’ì„ ì„ì–´ì„œ ì‚¬ìš©í•˜ë©´ í´ë˜ìŠ¤ì—ì„œë„ ë¬¸ì œê°€ ë°œìƒí•œë‹¤.** ì˜ˆë¥¼ ë“¤ì–´ì„œ ì‚¬ìš©ìì™€ ê·¸ ì‚¬ìš©ìì˜ í¬ëŸ¼ ê²Œì‹œê¸€ì„ ë‚˜íƒ€ë‚´ëŠ” í´ë˜ìŠ¤ë¥¼ ê°€ì •í•´ë³´ì.

```typescript
class UserPosts {
  user: UserInfo | null;
  posts: Post[] | null;

  constructor() {
    this.user = null;
    this.posts = null;
  }

  async init(userId: string) {
    return Promise.all([
      async () => (this.user = await fetchUser(userId)),
      async () => (this.posts = await fetchPostsForUser(userId)),
    ]);
  }

  getUserName() {
    // ...?
  }
}
```

ë‘ ë²ˆì˜ ë„¤íŠ¸ì›Œí¬ ìš”ì²­ì´ ë¡œë“œë˜ëŠ” ë™ì•ˆ userì™€ postsëŠ” null ìƒíƒœì´ë‹¤. ë‘˜ ë‹¤ nullì´ê±°ë‚˜ ë‘˜ ì¤‘ í•˜ë‚˜ë§Œ nullì´ê±°ë‚˜ ë‘˜ë‹¤ nullì´ ì•„ë‹ ê²ƒì´ë‹¤.

**ì†ì„±ê°’ì˜ ë¶ˆí™•ì‹¤ì„±ì´ í´ë˜ìŠ¤ì˜ ëª¨ë“  ë©”ì„œë“œì— ë‚˜ìœ ì˜í–¥ì„ ë¯¸ì¹œë‹¤. ê·¸ë ‡ê²Œ ë˜ë©´ null ì²´í¬ê°€ ë‹¨ë¬´í•´ì§€ë©´ì„œ ë²„ê·¸ë¥¼ ì–‘ì‚°í•˜ê²Œ ëœë‹¤.**

```typescript
declare function fetchUser(userId: string): Promise<UserInfo>;
declare function fetchPostsForUser(userId: string): Promise<Post[]>;

interface UserInfo {
  name: string;
  age: number;
}

interface Post {
  title: string;
}

class UserPosts {
  user: UserInfo;
  posts: Post[];

  constructor(user: UserInfo, posts: Post[]) {
    this.user = user;
    this.posts = posts;
  }

  static async init(userId: string): Promise<UserPosts> {
    const [user, posts] = await Promise.all([
      fetchUser(userId),
      fetchPostsForUser(userId),
    ]);
    return new UserPosts(user, posts);
  }

  getUserName(): string {
    return this.user.name;
  }
}

(async () => {
  const nUser = await UserPosts.init('iamkanguk'); // OK
})();
```

ê¸°ì¡´ì— ì±…ì—ì„œ ì†Œê°œí•œ ì½”ë“œì—ì„œ ì¡°ê¸ˆ ë³€í˜•í•´ë³´ì•˜ë‹¤. UserPosts í´ë˜ìŠ¤ëŠ” ì™„ì „íˆ nullì´ ì•„ë‹ˆê²Œ ë˜ì—ˆê³  ë©”ì„œë“œë¥¼ ì‘ì„±í•˜ê¸°ë„ ì‰¬ì›Œì¡Œë‹¤.

ë¬¼ë¡  ë§Œì•½ì— ë°ì´í„°ê°€ ë¶€ë¶„ì ìœ¼ë¡œ ì¤€ë¹„ë˜ì—ˆì„ ë•Œ ì‘ì—…ì„ ì‹œì‘í•´ì•¼ í•œë‹¤ë©´ nullì¼ ìˆ˜ ìˆëŠ” ê°€ëŠ¥ì„±ì´ ìˆê¸° ë•Œë¬¸ì— ê·¸ë ‡ê²Œ ë˜ë©´ nullê³¼ nullì´ ì•„ë‹Œ ê²½ìš°ì˜ ìƒíƒœë¥¼ ë‹¤ë£¨ì–´ì•¼ í•œë‹¤.

nullì¸ ê²½ìš°ê°€ í•„ìš”í•œ ì†ì„±ì€ Promiseë¡œ ë°”ê¾¸ë©´ ì•ˆëœë‹¤. ì½”ë“œê°€ ë§¤ìš° ë³µì¡í•´ì§€ê³  ëª¨ë“  ë©”ì„œë“œê°€ ë¹„ë™ê¸°ë¡œ ë°”ë€Œì–´ì•¼ í•œë‹¤. PromiseëŠ” ë°ì´í„°ë¥¼ ë¡œë“œí•˜ëŠ” ì½”ë“œë¥¼ ë‹¨ìˆœí•˜ê²Œ ë§Œë“¤ì–´ì£¼ì§€ë§Œ ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ëŠ” í´ë˜ìŠ¤ì—ì„œëŠ” ë°˜ëŒ€ë¡œ ì½”ë“œê°€ ë³µì¡í•´ì§€ëŠ” íš¨ê³¼ë¥¼ ë‚´ê¸°ë„ í•œë‹¤.

### ğŸ¤”ìš”ì•½ì •ë¦¬ğŸ¤”

> **í•œ ê°’ì˜ null ì—¬ë¶€ê°€ ë‹¤ë¥¸ ê°’ì˜ null ì—¬ë¶€ì— ì•”ì‹œì ìœ¼ë¡œ ê´€ë ¨ë˜ë„ë¡ ì„¤ê³„í•˜ë©´ ì•ˆëœë‹¤.**

> **API ì‘ì„± ì‹œì—ëŠ” ë°˜í™˜ íƒ€ì…ì„ í° ê°ì²´ë¡œ ë§Œë“¤ê³  ë°˜í™˜ íƒ€ì… ì „ì²´ê°€ nullì´ê±°ë‚˜ nullì´ ì•„ë‹ˆê²Œ ë§Œë“¤ì–´ì•¼ í•œë‹¤. ì‚¬ëŒê³¼ íƒ€ì… ì²´ì»¤ ëª¨ë‘ì—ê²Œ ëª…ë£Œí•œ ì½”ë“œê°€ ë  ê²ƒì´ë‹¤.**

> **í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ ë•ŒëŠ” í•„ìš”í•œ ëª¨ë“  ê°’ì´ ì¤€ë¹„ë˜ì—ˆì„ ë•Œ ìƒì„±í•˜ì—¬ nullì´ ì¡´ì¬í•˜ì§€ ì•Šë„ë¡ í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.**

> **strictNullChecksë¥¼ ì„¤ì •í•˜ë©´ ì½”ë“œì— ë§ì€ ì˜¤ë¥˜ê°€ í‘œì‹œë˜ê² ì§€ë§Œ null ê°’ê³¼ ê´€ë ¨ëœ ë¬¸ì œì ì„ ì°¾ì•„ë‚¼ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ë°˜ë“œì‹œ í•„ìš”í•˜ë‹¤.**

<br/>

## ì•„ì´í…œ32: ìœ ë‹ˆì˜¨ì˜ ì¸í„°í˜ì´ìŠ¤ë³´ë‹¤ëŠ” ì¸í„°í˜ì´ìŠ¤ì˜ ìœ ë‹ˆì˜¨ì„ ì‚¬ìš©í•˜ê¸°

> ìœ ë‹ˆì˜¨ íƒ€ì…ì˜ ì†ì„±ì„ ê°€ì§€ëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‘ì„± ì¤‘ì´ë¼ë©´ ì¸í„°í˜ì´ìŠ¤ì˜ ìœ ë‹ˆì˜¨ íƒ€ì…ì„ ì‚¬ìš©í•˜ëŠ” ê²Œ ë” ì•Œë§ì§€ëŠ” ì•Šì„ì§€ ê²€í† í•´ë´ì•¼ í•œë‹¤.

```typescript
interface Layer {
  layout: FillLayout | LineLayout | PointLayout;
  paint: FillPaint | LinePaint | PointPaint;
}
```

- layout ì†ì„±ì€ ëª¨ì–‘ì´ ê·¸ë ¤ì§€ëŠ” ë°©ë²•ê³¼ ìœ„ì¹˜(ë‘¥ê·¼ ëª¨ì„œë¦¬, ì§ì„ )ë¥¼ ì œì–´í•œë‹¤.
- paint ì†ì„±ì€ ìŠ¤íƒ€ì¼(íŒŒë€ì„ , êµµì€ì„ , ì–‡ì€ì„ , ì ì„ )ì„ ì œì–´í•œë‹¤.

**layoutì´ LineLayout íƒ€ì…ì´ë©´ì„œ paint ì†ì„±ì´ FillPaint íƒ€ì…ì¸ ê²ƒì€ ë§ì´ë˜ì§€ ì•ŠëŠ”ë‹¤.**
ê°ê° íƒ€ì…ì˜ ê³„ì¸µì„ ë¶„ë¦¬ëœ ì¸í„°í˜ì´ìŠ¤ë¡œ í•¸ë“¤ë§í•´ë³´ì.

```typescript
interface FillLayer {
  layout: FillLayout;
  paint: FillPaint;
}
interface LineLayer {
  layout: LineLayout;
  paint: LinePaint;
}
// ...
```

**ìœ„ì˜ í˜•íƒœë¡œ Layerë¥¼ ì •ì˜í•´ì£¼ë©´ layoutê³¼ paint ì†ì„±ì´ ì˜ëª»ëœ ì¡°í•©ìœ¼ë¡œ ì„ì´ëŠ” ê²½ìš°ë¥¼ ë°©ì§€í•  ìˆ˜ ìˆë‹¤. ìœ íš¨í•œ ìƒíƒœë§Œì„ í‘œí˜„í•˜ë„ë¡ íƒ€ì…ì„ ì •ì˜í•´ì£¼ì—ˆë‹¤.**

ì´ëŸ¬í•œ íŒ¨í„´ì˜ ê°€ì¥ ì¼ë°˜ì ì¸ ì˜ˆì‹œëŠ” `íƒœê·¸ëœ ìœ ë‹ˆì˜¨(ë˜ëŠ” êµ¬ë¶„ëœ ìœ ë‹ˆì˜¨)` ì´ë‹¤. **Layerì˜ ê²½ìš° ì†ì„± ì¤‘ì˜ í•˜ë‚˜ëŠ” ë¬¸ìì—´ ë¦¬í„°ëŸ´ íƒ€ì…ì˜ ìœ ë‹ˆì˜¨ì´ ëœë‹¤.**

```typescript
interface Layer {
  type: 'fill' | 'line' | 'point';
  layout: FillLayout | LineLayout | PointLayout;
  paint: FillPaint | LinePaint | PointPaint;
}
```

ë§ˆì°¬ê°€ì§€ë¡œ typeì´ fillì¸ ê²ƒê³¼ í•¨ê»˜ LineLayoutê³¼ PointPaint íƒ€ì…ì´ ì“°ì´ëŠ” ê²ƒì€ ì˜ë¯¸ìƒ ì˜³ì§€ ì•Šë‹¤. **ê·¸ë ‡ê¸° ë•Œë¬¸ì— Layerë¥¼ ì¸í„°í˜ì´ìŠ¤ì˜ ìœ ë‹ˆì˜¨ìœ¼ë¡œ ë°”ê¿”ë³´ë ¤ê³  í•œë‹¤.**

```typescript
interface FillLayer {
  type: 'fill';
  layout: FillLayout;
  paint: FillPaint;
}
// ...

type Layer = FillLayer | LineLayer | PointLayer;
```

**type ì†ì„±ì€ íƒœê·¸ì´ë©° ëŸ°íƒ€ì„ì— ì–´ë–¤ íƒ€ì…ì˜ Layerê°€ ì‚¬ìš©ë˜ëŠ”ì§€ íŒë‹¨í•˜ëŠ”ë° ì“°ì¸ë‹¤. íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ì—ì„œëŠ” íƒœê·¸ë¥¼ ì°¸ì¡°í•´ì„œ íƒ€ì…ì˜ ë²”ìœ„ë¥¼ ì¢í ìˆ˜ ìˆë‹¤.**

```typescript
function drawLayer(layer: Layer) {
  if (layer.type === 'fill') {
    const { paint } = layer;
    const { layout } = layer;
  } // ...
}
```

**ê° íƒ€ì…ì˜ ì†ì„±ë“¤ ê°„ì˜ ê´€ê³„ë¥¼ ì œëŒ€ë¡œ ëª¨ë¸ë§í•˜ë©´ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ê°€ ì½”ë“œì˜ ì •í™•ì„±ì„ ì²´í¬í•˜ëŠ”ë° ë„ì›€ì´ ëœë‹¤.** í•˜ì§€ë§Œ ìœ„ì˜ ì½”ë“œëŠ” íƒ€ì… ë¶„ê¸° í›„ layerê°€ í¬í•¨ëœ ë™ì¼í•œ ì½”ë“œê°€ ë°˜ë³µë˜ëŠ” ê²ƒì´ ì–´ìˆ˜ì„ í•´ë³´ì¸ë‹¤.

### íƒœê·¸ëœ ìœ ë‹ˆì˜¨ í™œìš©

> íƒœê·¸ëœ ìœ ë‹ˆì˜¨ì€ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ íƒ€ì… ì²´ì»¤ì™€ ì˜ ë§ê¸° ë•Œë¬¸ì— íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ ì–´ë””ì„œë“  ì°¾ì„ ìˆ˜ ìˆë‹¤.
>
> ì–´ë–¤ ë°ì´í„° íƒ€ì…ì„ íƒœê·¸ëœ ìœ ë‹ˆì˜¨ìœ¼ë¡œ í‘œí˜„í•  ìˆ˜ ìˆë‹¤ë©´ ê·¸ë ‡ê²Œ í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤. ë˜ëŠ” ì—¬ëŸ¬ ê°œì˜ ì„ íƒì  í•„ë“œê°€ ë™ì‹œì— ê°’ì´ ìˆê±°ë‚˜ ë™ì‹œì— undefinedì¸ ê²½ìš°ë„ íƒœê·¸ëœ ìœ ë‹ˆì˜¨ íŒ¨í„´ì´ ì˜ ë§ëŠ”ë‹¤.

```typescript
interface Person {
  name: string;
  // ë‹¤ìŒì€ ë‘˜ë‹¤ ìˆê±°ë‚˜ ë‘˜ë‹¤ ì—†ë‹¤.
  placeOfBirth?: string;
  dateOfBirth?: Date;
}
```

placeOfBirthì™€ dateOfBirthëŠ” ì‹¤ì œë¡œ ì—°ê´€ì´ ìˆì§€ë§Œ íƒ€ì… ì •ë³´ì—ì„œëŠ” ì–´ë– í•œ ê´€ê³„ë„ í‘œí˜„ë˜ì§€ ì•Šì•˜ë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì— ë‘ ê°œì˜ ì†ì„±ì„ í•˜ë‚˜ì˜ ê°ì²´ë¡œ ëª¨ì•„ì„œ ê´€ë¦¬í•˜ëŠ”ê²Œ ë” ì¢‹ì€ ì„¤ê³„ê°€ ëœë‹¤.

```typescript
interface Person {
  name: string;
  birth?: {
    place: string;
    date: Date;
  };
}

const alanT: Person = {
  name: 'iamkanguk',
  birth: {
    // 'date' ì†ì„±ì´ '{ place: string }' í˜•ì‹ì— ì—†ì§€ë§Œ
    // '{ place: string; date: Date; }' í˜•ì‹ì— í•„ìˆ˜ì´ë‹¤.
    place: 'London',
  },
};

// Person ê°ì²´ë¥¼ ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ëŠ” í•¨ìˆ˜ëŠ” birthë§Œ í™•ì¸í•˜ë©´ ëœë‹¤.
function eulogize(p: Person) {
  console.log(p.name);
  const { birth } = p;
  if (birth) {
    console.log('birth ìˆìŒ');
  }
}
```

**íƒ€ì…ì˜ êµ¬ì¡°ë¥¼ ì†ëŒˆìˆ˜ ì—†ëŠ” ìƒí™©(ì˜ˆë¥¼ ë“¤ì–´ APIì˜ ê²°ê³¼)ì´ë©´ ì¸í„°í˜ì´ìŠ¤ì˜ ìœ ë‹ˆì˜¨ì„ ì‚¬ìš©í•´ì„œ ì†ì„± ì‚¬ì´ì˜ ê´€ê³„ë¥¼ ëª¨ë¸ë§í•  ìˆ˜ ìˆë‹¤.**

```typescript
interface Name {
  name: string;
}

interface PersonWithBirth extends Name {
  placeOfBirth: string;
  dateOfBirth: Date;
}

type Person = Name | PersonWithBirth;

function eulogize(p: Person) {
  if ('placeOfBirth' in p) {
    const { dateOfBirth } = p;
  }
}
```

**íƒ€ì… ì •ì˜ë¥¼ í†µí•´ ì†ì„± ê°„ì˜ ê´€ê³„ë¥¼ ë”ìš± ëª…í™•í•˜ê²Œ ë§Œë“¤ ìˆ˜ ìˆë‹¤.**

### ğŸ¤”ìš”ì•½ì •ë¦¬ğŸ¤”

> **ìœ ë‹ˆì˜¨ íƒ€ì…ì˜ ì†ì„±ì„ ì—¬ëŸ¬ ê°œ ê°€ì§€ëŠ” ì¸í„°í˜ì´ìŠ¤ì—ì„œëŠ” ì†ì„± ê°„ì˜ ê´€ê³„ê°€ ë¶„ëª…í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ì‹¤ìˆ˜ê°€ ìì£¼ ë°œìƒí•˜ë¯€ë¡œ ì£¼ì˜í•´ì•¼ í•œë‹¤.**

> **ìœ ë‹ˆì˜¨ì˜ ì¸í„°í˜ì´ìŠ¤ë³´ë‹¤ ì¸í„°í˜ì´ìŠ¤ì˜ ìœ ë‹ˆì˜¨ì´ ë” ì •í™•í•˜ê³  íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ê°€ ì´í•´í•˜ê¸°ë„ ì¢‹ë‹¤.**

> **íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ê°€ ì œì–´ íë¦„ì„ ë¶„ì„í•  ìˆ˜ ìˆë„ë¡ íƒ€ì…ì— íƒœê·¸ë¥¼ ë„£ëŠ” ê²ƒì„ ê³ ë ¤í•´ì•¼ í•œë‹¤. íƒœê·¸ëœ ìœ ë‹ˆì˜¨ì€ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ì™€ ë§¤ìš° ì˜ ë§ê¸° ë•Œë¬¸ì— ìì£¼ ë³¼ ìˆ˜ ìˆëŠ” íŒ¨í„´ì´ë‹¤.**
